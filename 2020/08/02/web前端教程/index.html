<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.jpg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.jpg?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="教程,">










<meta name="description" content="web前端入门到实战">
<meta name="keywords" content="教程">
<meta property="og:type" content="article">
<meta property="og:title" content="web前端入门到实战">
<meta property="og:url" content="http://yoursite.com/2020/08/02/web前端教程/index.html">
<meta property="og:site_name" content="小光的博客">
<meta property="og:description" content="web前端入门到实战">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://wx-file-cloud.oss-cn-beijing.aliyuncs.com/wxf01df371f2b60c54o6zAJs7ejCiwjEXNebUTC6k68ZOAm6k3jgIZ57Ede4146a94e0db1b0f411ae6b6dde8a409-003405073907257106-20200803095708776.png">
<meta property="og:image" content="https://wx-store.oss-cn-beijing.aliyuncs.com/c561beaa640.jpeg">
<meta property="og:image" content="https://wx-store.oss-cn-beijing.aliyuncs.com/8ba7e82e081.jpeg">
<meta property="og:updated_time" content="2020-08-24T07:56:15.312Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="web前端入门到实战">
<meta name="twitter:description" content="web前端入门到实战">
<meta name="twitter:image" content="https://wx-file-cloud.oss-cn-beijing.aliyuncs.com/wxf01df371f2b60c54o6zAJs7ejCiwjEXNebUTC6k68ZOAm6k3jgIZ57Ede4146a94e0db1b0f411ae6b6dde8a409-003405073907257106-20200803095708776.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/08/02/web前端教程/">





  <title>web前端入门到实战 | 小光的博客</title>
  








  <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?bacbd4424722e498fac9ea507f3a8807";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  window.onload=function(){
    if (!sessionStorage.getItem('homePgCount')) {
      sessionStorage.setItem('homePgCount', Math.floor(new Date().getSeconds() % 11));
    }
    $('.header-inner').css("backgroundImage", 'url("https://mfaying.github.io/images/bg' + (sessionStorage.getItem('homePgCount') || 0) + '.jpg")')
    $('.blur-bg').css("backgroundImage", 'url("https://mfaying.github.io/images/bg' + (sessionStorage.getItem('homePgCount') || 0) + '.jpg")')
  }

  </script>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
  <div class="blur-bg"></div>
  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小光的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/02/web前端教程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小光">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小光的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">web前端入门到实战</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-02T21:43:49+08:00">
                2020-08-02
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2020/08/02/web前端教程/" class="leancloud_visitors" data-flag-title="web前端入门到实战">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>web前端入门到实战<br><a id="more"></a></p>
<h1 id="概览"><a href="#概览" class="headerlink" title="概览"></a>概览</h1><p>“web前端入门到实战”是为后端、数据工程师量身定制的前端学习教程。通过本教程的学习，小伙伴们可以系统掌握一套web前端开发体系，满足日常开发需要，并且具备系统地分析和解决问题的能力。</p>
<p>学习会分为两个阶段进行：</p>
<ol>
<li>系统学习（约占总学习时间的75%）</li>
<li>项目讲解</li>
</ol>
<p>重点在系统学习，掌握整个体系后小伙伴们完全可以自主去理解项目。</p>
<h2 id="系统学习路线"><a href="#系统学习路线" class="headerlink" title="系统学习路线"></a>系统学习路线</h2><p><img src="https://wx-file-cloud.oss-cn-beijing.aliyuncs.com/wxf01df371f2b60c54o6zAJs7ejCiwjEXNebUTC6k68ZOAm6k3jgIZ57Ede4146a94e0db1b0f411ae6b6dde8a409-003405073907257106-20200803095708776.png" width="400" height="400" alt="系统学习路线"></p>
<p>每章学习时间跨度为1~3周，皆为周末自学。部分需要讲解的章节计划录制视频方便小伙伴们在家学习。</p>
<p>阶段一（2~3个月，重中之重，踏实学完即可快速上手项目开发）</p>
<ol>
<li>html</li>
<li>css</li>
<li>作业：有赞官网首页首屏静态页面</li>
<li>js(es5)</li>
<li>react</li>
<li>redux</li>
</ol>
<p>阶段二（web前端技术栈必要知识补充）</p>
<ol>
<li>dom</li>
<li>bom</li>
<li>html5</li>
<li>css3</li>
<li>es6</li>
<li>webpack</li>
</ol>
<h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><ol>
<li><a href="https://code.visualstudio.com/" target="_blank" rel="noopener">VS Code</a>，代码编辑器</li>
<li><a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener">nvm</a>(Node Version Manager，可以自由切换node.js版本)，安装完毕后再用nvm安装node.js v12.16.2。</li>
<li>Chrome浏览器</li>
</ol>
<h1 id="html"><a href="#html" class="headerlink" title="html"></a>html</h1><h2 id="初识html"><a href="#初识html" class="headerlink" title="初识html"></a>初识html</h2><p>html全称Hypertext Markup Language，超文本标记语言，网页中所有的文字图片和组织结构都是由html来编写的，当然html能够完成的工作不止这些。</p>
<p>html不是一种编程语言，它不像c/c++/java等编程语言那样拥有变量、函数等，它仅仅由标签组成，如<code>&lt;div&gt;&lt;/div&gt;</code>。</p>
<p>html这个标签是根标签，其他的标签都要放在这个标签里面编写，次一级的两个结构是head标签和body标签<code>&lt;head&gt;&lt;/head&gt;</code>,<code>&lt;body&gt;&lt;/body&gt;</code>。head主要是给浏览器看的，body是页面的主体部分，我们展示出来的内容一般都放在body标签中。</p>
<p>下面让我们来看一个基础的html，打开VS Code编辑器，创建一个test.html文件，内容如下：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  测试</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>打开浏览器就可以看到”测试”两字了。</p>
<p>其中:</p>
<p>doctype是文档类型，有混杂模式和标准模式两大类，不同的模式主要会影响CSS内容的呈现，一般使用HTML5标准模式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br></pre></td></tr></table></figure></p>
<p>lang属性是来告诉搜索引擎爬虫我们网站是使用什么语言的，例如<code>&lt;html lang=&quot;zh&quot;&gt;</code>表示中文，<code>&lt;html lang=&quot;en&quot;&gt;</code>表示英文。</p>
<p><code>&lt;meta&gt;</code>标签可以设置编码格式的，这个标签不需要写闭合标签。编码集主要有gb2312、gbk、unicode、utf-8等等，一般使用utf-8。</p>
<p><code>&lt;title&gt;</code>标签表示页面标题，每一个网页都有自己的名字，这个名字就是通过<code>&lt;title&gt;</code>标签设置的。</p>
<h2 id="html中的标签"><a href="#html中的标签" class="headerlink" title="html中的标签"></a>html中的标签</h2><p>html中的标签主要分为两大类：</p>
<p>1.行级(或叫内联、行内)元素(标签)，display: inline;<br>这一类元素(标签)的特点是：</p>
<ol>
<li>不占满整行，元素所占空间完全由内容决定</li>
<li>不可以改变宽高</li>
</ol>
<p>如：a em span strong</p>
<p>2.块级元素(标签)，display: block;<br>这一类元素的特点是：</p>
<ol>
<li>占满整行，无论内容多少 </li>
<li>可以改变宽高</li>
</ol>
<p>如：address div form h1-h6 p ul ol li</p>
<p>还有一类标签，既不属于行级元素也不属于块级元素，它们既不独占一行，又可以随意改变宽高，如<code>img</code>、<code>select</code>。</p>
<p>html的标签数量是很多的，并且在不断增加。这么多标签我们不必都记住，接下介绍一些HTML4中常见的标签，HTML5会在后面章节介绍。</p>
<h3 id="p标签（块级）"><a href="#p标签（块级）" class="headerlink" title="p标签（块级）"></a>p标签（块级）</h3><p><code>&lt;p&gt;&lt;/p&gt;</code>是段落标签，在<code>&lt;p&gt;&lt;/p&gt;</code>中写的内容会当做一个段落来处理。它的特点是独占一行，并且段落上下有一定间距。</p>
<h3 id="标题标签h1-h6（块级）"><a href="#标题标签h1-h6（块级）" class="headerlink" title="标题标签h1-h6（块级）"></a>标题标签h1-h6（块级）</h3><p>标题标签的作用是着重显示文字，一般用于标题，它会将文字加粗放大并且独占一行。其中h4的默认大小是正常的文字大小，不过是加粗的。</p>
<h3 id="strong标签（行级）"><a href="#strong标签（行级）" class="headerlink" title="strong标签（行级）"></a>strong标签（行级）</h3><p><code>&lt;strong&gt;&lt;/strong&gt;</code>标签的作用是将里面的文字加粗处理。</p>
<h3 id="em标签（行级）"><a href="#em标签（行级）" class="headerlink" title="em标签（行级）"></a>em标签（行级）</h3><p><code>&lt;em&gt;&lt;/em&gt;</code>的作用是将里面的文字变成斜体。</p>
<h3 id="del标签（行级）"><a href="#del标签（行级）" class="headerlink" title="del标签（行级）"></a>del标签（行级）</h3><p><code>&lt;del&gt;&lt;/del&gt;</code>是删除标签，它会在里面的文字的中间画一条横线。</p>
<h3 id="address-标签（块级）"><a href="#address-标签（块级）" class="headerlink" title="address 标签（块级）"></a>address 标签（块级）</h3><p><code>&lt;address&gt;&lt;/address&gt;</code>是地址标签，它会将里面的内容变成斜体并且独占一行。</p>
<h3 id="div、span"><a href="#div、span" class="headerlink" title="div、span"></a>div、span</h3><p>上面都是很基础的标签，作用也是显而易见。还有一种结构化标签，它们没有特殊的效果，而是用来当容器包裹其他标签的。</p>
<p>结构化标签的一个作用就是用来为里面的子元素设置样式。一般的元素如果某条属性没有被开发者设置样式的话，它会自动继承父级元素的相应属性的样式。</p>
<p>比如我们想让三个p标签里面的文字都变成红色，给三个p标签都写上color:red是非常麻烦的，最简单的方法是将三个p标签放到一个结构化标签里面，再给这个结构化标签设置color:red的样式，里面的三个p标签就都会有这个样式了。</p>
<p>我们在写一个页面之前，最先考虑的就是结构问题，因此一般先写结构化标签。</p>
<p>下面我们介绍最常见的两个结构化标签。</p>
<p>1.div</p>
<p><code>&lt;div&gt;&lt;/div&gt;</code>标签是前端开发中很常见的容器标签。</p>
<p>2.span</p>
<p><code>&lt;span&gt;&lt;/span&gt;</code>标签也是常见的容器标签，多数情况下盛放文字或者icon之类的内容。</p>
<h3 id="ol、li-（ol、li都是块级）"><a href="#ol、li-（ol、li都是块级）" class="headerlink" title="ol、li （ol、li都是块级）"></a>ol、li （ol、li都是块级）</h3><p><code>&lt;ol&gt;&lt;li&gt;&lt;/li&gt;&lt;/ol&gt;</code>是一组标签，它们二者都是成对出现的，单独出现没有意义。</p>
<p>这组标签叫作有序列表，ol是外面的列表框，li是里面的子项，并且每一个li子项的前面都会带有序号。</p>
<p>ol可以设置一些属性：</p>
<ol>
<li><p>type，这个属性的作用是用来设置每一个子项前面显示的内容的。默认情况下是按照数字来排序的，如果我们改成type=”a”，前面序号就会按照小写字母来排序。type的属性值还可以设置成A(按照大写字母来排序)、i(罗马数字、小写）、I(罗马数字、大写)来排序。此外，设置成其它值都是错误的，错误的情况下ol会按照默认的数字来排序。</p>
</li>
<li><p>reversed，设置为reversed=”reversed”的时候，子项的序号会变成倒序排列。</p>
</li>
<li><p>start，这个属性的意思是设置子项从第几个序号开始显示，当我们写start=”2”的时候，序号就会变成2、3、4，而不是默认的1、2、3，字母也是同样的道理。</p>
</li>
</ol>
<p>然而，我们实际上很少在网页中看到文字前面有这些数字、字母序号，所以我们一般不使用ol、li，而是使用ul、li标签。</p>
<h3 id="ul、li（ul、li都是块级）"><a href="#ul、li（ul、li都是块级）" class="headerlink" title="ul、li（ul、li都是块级）"></a>ul、li（ul、li都是块级）</h3><p><code>&lt;ul&gt;&lt;li&gt;&lt;/li&gt;&lt;/ul&gt;</code>这一组标签是无序列表，前面的序号会变成点（• ）。</p>
<p>ul同样有一个type属性，这个属性的值设置的是每一个子项前面显示的符号的形式，默认的值是disc(圆点)，当值是square的时候，前面显示的就是方块，值是circle的时候显示的是空心圆圈。</p>
<p>同样的道理，我们也很少在网页中看到文字前面带圆点、方块之类的，所以我们在使用ul、li标签的时候，都会把ul的默认样式list-style改成none，这已经属于css的部分了。</p>
<p>无序列表一般用作导航栏之类，里面的结构样式都一样的部分。</p>
<h3 id="a-行级元素"><a href="#a-行级元素" class="headerlink" title="a(行级元素)"></a>a(行级元素)</h3><p><code>&lt;a&gt;&lt;/a&gt;</code>标签是一个非常重要的标签，它有一个必填的属性叫做href（hyperText reference，超文本链接）。</p>
<p>a标签的主要作用有两点：</p>
<ol>
<li><p>定点跳转我们指定的id的元素位置。这个用法需要我们在href中写上id的值,如<code>&lt;a href=&quot;#test&quot;&gt;点击我跳转&lt;/a&gt;</code>，这样点击a标签后页面就会定位到id=test的元素的位置</p>
</li>
<li><p>超链接。我们设置href的值为本地或者网上的链接，如<a href="https://www.baidu.com/" target="_blank" rel="noopener">https://www.baidu.com/</a> ，点击a标签就会跳转到这个网页。</p>
</li>
<li><p>协议限定符。在href中我们可以写javascript代码，如href=”javascript:while(1){alert(“你中毒了”)}”，点击这个a标签后浏览器会不断弹出对话框。还有发送邮件：<code>&lt;a href=&quot;mailto:rebell0003@gmail.com&quot;&gt;rebell0003@gmail.com&lt;/a&gt;</code>，拨打电话：<code>&lt;a href=&quot;tel:13266419102&quot;&gt;13266419102&lt;/a&gt;</code>。</p>
</li>
</ol>
<p>a标签默认是蓝色字体且带有下划线，我们一般会用css将a标签的默认样式覆盖掉。</p>
<h3 id="img-行级块元素"><a href="#img-行级块元素" class="headerlink" title="img(行级块元素)"></a>img(行级块元素)</h3><p><code>&lt;img&gt;&lt;/img&gt;</code>标签是image图片的意思，它有一个必须的属性叫做src，src属性的值是我们图片的地址，可以是绝对地址也可以是相对地址。</p>
<p>图片标签还有两个属性。</p>
<ol>
<li><p>alt属性。这个属性为其设置图片占位符，当图片因为网速或者链接错误等原因加载不出来的时候，会显示alt设置的值。</p>
</li>
<li><p>title属性。图片提示符，当我们鼠标移入图片的时候，在鼠标旁边会显示这个title属性设置的值。</p>
</li>
</ol>
<h3 id="table、tr、td标签（table是块级，tr、td是行级元素）"><a href="#table、tr、td标签（table是块级，tr、td是行级元素）" class="headerlink" title="table、tr、td标签（table是块级，tr、td是行级元素）"></a>table、tr、td标签（table是块级，tr、td是行级元素）</h3><p><code>&lt;table&gt;&lt;/table&gt;</code>需要搭配<code>&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;</code>一起使用。</p>
<p>table是表格的意思，tr是表格的行，td是表格的数据单元，我们可以理解为列。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>table标签的大概结构是这个样子的，还有几个属性。</p>
<ol>
<li>cellpadding 内边距属性，可以为每一个单元格设置内边距，如cellpadding=”10px”（在table上设）</li>
<li>cellspacing 设置单元之间的空间，当我们设置为0时就可以去掉边线了。（在table上设）</li>
<li>colspan属性，设置一个td占几个单位，默认的一个td占一个单位，可以实现合并单元格的效果。(在td上加，值为数字）</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"2"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"2"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>以前可以用这个标签给页面布局，现在我们不这么用了，而是使用div + css给页面布局。</p>
<p>原因是：</p>
<p>使用嵌套表格的方法来布局网页框架会使网页浏览的速度变慢，因为table中的内容是自适应的，为了自适应，它要计算嵌套最深的节点以满足自适应，所以有可能会有一断时间出现空白才显示。 </p>
<p>使用div + css的方法布局网页框架的优点在于制作出来的页面速度较快，且内容和样式分离，便于维护扩展。缺点是相比table方式要复杂些。现在网页都倾向于使用div + css来布局了。</p>
<h3 id="表单（form，块级元素）"><a href="#表单（form，块级元素）" class="headerlink" title="表单（form，块级元素）"></a>表单（form，块级元素）</h3><p>这个元素可以让我们实现前端和后台的数据交互。</p>
<p>表单都是成组出现的，里面有各种各样的元素。</p>
<p>我们先介绍一下form表单元素拥有的属性：</p>
<ol>
<li>action属性 填写服务器地址，这个属性的意思是我们把数据发送到哪个服务器地址</li>
<li>method属性 传输方法，最常见的是POST/GET</li>
</ol>
<p>我们再介绍一下表单拥有的子元素：</p>
<h3 id="input标签"><a href="#input标签" class="headerlink" title="input标签"></a>input标签</h3><p>这个标签是一个单标签，不需要闭合。这个标签有一个type属性，这个属性的值决定了这个input标签的类型是什么。</p>
<ol>
<li>text 输入框，我们可以输入文字信息。</li>
<li>password 密码框，输入的文字信息都会以···形式展示。</li>
<li>submit 如果type=”submit”，这个input标签就是一个提交按钮，我们点击这个提交按钮就会将整个表单数据发送到后台服务器。</li>
</ol>
<p>我们发送数据一定要有数据名(key)和数据内容(value)，数据内容就是我们给input标签设置(或输入)的value属性的值，而数据名就需要我们在input标签里面写一个name属性来表示我们这个数据的名字是什么。</p>
<p>这里我们写一个简单的表单：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"https://www.baidu.com/"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>username: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>password: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>当我们随便输入一个用户名和密码，点击提交按钮之后，浏览器显示的内容是这样的：</p>
<p><a href="https://www.baidu.com/?username=test&amp;password=test" target="_blank" rel="noopener">https://www.baidu.com/?username=test&amp;password=test</a> </p>
<p>网页地址后面出现了我们所传递的数据<code>?username=test&amp;password=test</code>。</p>
<p>input还有其他的数据形式：</p>
<ol>
<li>type=”radio”</li>
<li>type=”checkbox”</li>
</ol>
<p>radio是单选框的意思，当我们给一个input设置radio的type之后，它就会变成一个圆点。我们可以选择这个圆点，但是我们写很多单选框的时候，它们似乎都能被选中，并没有单选的作用，这是因为我们还没有为这一组单选框设置名字。当我们给几个radio都设置了同一个name的时候，它们就会变成只能选择一个的单选框了。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"https://www.baidu.com/"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"male"</span> <span class="attr">checked</span>&gt;</span>Male</span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"female"</span>&gt;</span>Female</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>checkbox是复选框的意思，我们可以同时选择很多个选项。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"https://www.baidu.com/"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"vehicle"</span> <span class="attr">value</span>=<span class="string">"Bike"</span>&gt;</span>I have a bike</span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"vehicle"</span> <span class="attr">value</span>=<span class="string">"Car"</span> <span class="attr">checked</span>&gt;</span>I have a car </span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><a href="https://www.baidu.com/?vehicle=Bike&amp;vehicle=Car" target="_blank" rel="noopener">https://www.baidu.com/?vehicle=Bike&amp;vehicle=Car</a></p>
<p>可以看到，我们可以使用checked属性为这两个选择框设置默认选中值。</p>
<h3 id="select标签-行级块元素"><a href="#select标签-行级块元素" class="headerlink" title="select标签(行级块元素)"></a>select标签(行级块元素)</h3><p>select标签是选择列表<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"https://www.baidu.com/"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"province"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>山东<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>黑龙江<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>下拉列表的name属性是写在<code>&lt;select&gt;</code>标签上的，option中间填写的内容就是默认的数据值，但是如果我们给每一个option都加一个value属性的话，那么option中间填写的内容则不作为数据值传递，value的值作为传递的数据值。</p>
<p>下拉列表默认选中的是第一个选项，如果我们可以添加属性selected=”selected”设置它的默认值。</p>
<h2 id="文字分隔符与编码集"><a href="#文字分隔符与编码集" class="headerlink" title="文字分隔符与编码集"></a>文字分隔符与编码集</h2><p>我们在body标签里加个div，为它设置样式，并在中间加一些文字。</p>
<p><code>&lt;div style=&quot;width: 50px; height:50px; background-color: red&quot;&gt;测试测试&lt;/div&gt;</code></p>
<p>我们发现文字会在这个div标签的边界处自动换行，也就是说这个div标签圈定了一个范围，里面的文字或者其他标签都默认在这个范围里面显示。</p>
<p>但是当我们在中间书写的不是中文而是一串英文字符，如<code>aaaaaaaaaaaa</code>的时候，我们会发现这一串英文字符在div的边界处并没有换行，这是为什么呢？</p>
<p>原因是我们的每一个汉字，计算机都会认出来这是一个单独的词，每一个汉字都会默认地和其他汉字分隔开，但是英文字母却不会默认地分隔开，因为计算机不知道多少个英文字母才算是一个词，因此我们需要手动为其添加分隔符。</p>
<p>这个分隔符我们也不陌生，就是空格，只要我们在这一串字符中间加几个空格，那么被空格隔开的字符就会被当做是一个词而与其他词分隔开。</p>
<p>那么现在问题来了，既然空格的作用是当做分隔符来使用，并不是我们所想的那种”空白的一个格”，那么我们怎么在html中写真正的空白格呢？</p>
<p>这里我们就要提到一个名词叫做编码集了。我们在书写html的时候，很多特殊的符号是无法写出来的，这个时候我们只能用编码来让浏览器识别我们所想的符号，编码的格式是<code>&amp;编码;</code>。空格的编码就是<code>&amp;nbsp;</code>，在页面中我们就可以看到空格了。</p>
<p>其次，用来当做标签的尖括号&lt;&gt;也是无法正常通过符号来显示出来的，我们同样需要用编码集让浏览器识别出来。&lt; 小于号的编码是<code>&amp;lt;</code>，less than的意思，同理，&gt; 大于号的编码是<code>&amp;gt;</code>，great than的意思。我们只要在html中写这两个编码，大于号和小于号就可以正常显示出来了。</p>
<p>回车也属于分隔符，在html中回车是没有作用的，我们想要在网页上让文字显示出回车换行的效果的话，编码也是没有办法实现的，我们需要一个标签叫<code>&lt;br&gt;</code>标签，这个标签的作用就是换行。<code>&lt;br&gt;</code> 标签是空标签（意味着它没有结束标签，因此<code>&lt;br&gt;&lt;/br&gt;</code>是错误的），也可以把结束标签放在开始标签中，也就是 <code>&lt;br /&gt;</code>。</p>
<p>》》》》》》》》》</p>
<h1 id="css"><a href="#css" class="headerlink" title="css"></a>css</h1><p>css全称Cascading Style Sheets，层叠样式表。它的主要作用是为html标签添加各种样式效果。</p>
<p>本章属于css2.0知识，css3.0知识会在后面章节中介绍。</p>
<h2 id="如何引入css"><a href="#如何引入css" class="headerlink" title="如何引入css"></a>如何引入css</h2><p>css的引入方式一共有4种：</p>
<p>1.行间样式，直接在html标签上写style属性，<code>&lt;div style=&quot;color: red&quot;&gt;&lt;div&gt;</code>。</p>
<p>2.页面级css，在head标签里面添加一个style标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    div &#123;</span><br><span class="line">      color: red;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>3.外部css文件(推荐)，我们在外部创建一个.css后缀的文件，然后在html里面引入这个外部的css文件即可。</p>
<p>在head标签里面加上一个link标签。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"index.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>4.import方式引入(已经弃用)</p>
<p>有两种写法：</p>
<p>1.在head标签里面写一个style标签，在第一行写上@import url()，url里面写上css文件的地址。</p>
<p>2.在css中直接使用</p>
<p><code>@import url(CSS文件路径地址)</code></p>
<p>这种引入方式有几种缺点导致它现在被弃用了：</p>
<p>1.import规则一定要写在除了@charset外的其他任何CSS规则之前，若有多个则一起写在最前面，否则失效。</p>
<p>下面这种写法会失效：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">  div &#123;</span><br><span class="line">    color: orange;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="keyword">@import</span> <span class="string">"import.css"</span>;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>2.程序读到import的时候，会忽略掉import，等到html里面的所有内容包括图片在内的所有资源全都加载完毕之后才加载import的css文件。也就是说，import引入的css文件和html的加载是同步进行的。</p>
<p>一般推荐使用link标签引入外部css文件的方式</p>
<p>优点如下：</p>
<p>1.有利于SEO。引用外部css文件，使得html页面的源代码减少很多，搜索引擎蜘蛛爬行更快。</p>
<p>2.浏览器可以开启多线程同时下载html和css，加载速度一般会快些。</p>
<p>3.样式文件分离，修改样式更方便，特别是整站共用的css样式，只需修改公共css文件就行了。</p>
<h2 id="css选择器"><a href="#css选择器" class="headerlink" title="css选择器"></a>css选择器</h2><p>css选择器的作用是让我们找到想要修改样式的元素，然后为其修改样式。</p>
<p>选择器有很多种：</p>
<h3 id="1-id选择器"><a href="#1-id选择器" class="headerlink" title="1.id选择器"></a>1.id选择器</h3><p>我们给元素添加一个id属性，这个id是唯一标识，一个元素只能有一个id，一个id原则上也只能给一个元素。然后在css文件中，可以通过<code>#id {}</code>的方式选择这个元素。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-id">#demo</span> &#123;</span></span><br><span class="line">    color: red;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="2-class类选择器"><a href="#2-class类选择器" class="headerlink" title="2.class类选择器"></a>2.class类选择器</h3><p>我们给元素添加一个class属性，这个属性为元素添加了一个类名，每一个元素可以有多个类名，同一个类名也可以赋给多个元素。然后我们在css文件中，可以通过<code>.class {}</code>的方式来选择添加了类名的元素。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.demo</span> &#123;</span></span><br><span class="line">    color: red;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">”demo”</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-标签选择器"><a href="#3-标签选择器" class="headerlink" title="3.标签选择器"></a>3.标签选择器</h3><p>通过标签名可以直接选择元素。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  div &#123;</span><br><span class="line">    color: red;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-通配符选择器"><a href="#4-通配符选择器" class="headerlink" title="4.通配符选择器 *{}"></a>4.通配符选择器 *{}</h3><p>所有标签都会被选择出来。</p>
<h3 id="5-属性选择器"><a href="#5-属性选择器" class="headerlink" title="5.属性选择器"></a>5.属性选择器</h3><p><code>[id] {}</code>,这样有id属性的元素都会被选择出来，类似还有<code>[class] {}</code>、<code>[class=&quot;demo&quot;] {}</code>等。</p>
<h3 id="6-父子选择器（派生选择器）"><a href="#6-父子选择器（派生选择器）" class="headerlink" title="6.父子选择器（派生选择器）"></a>6.父子选择器（派生选择器）</h3><p><code>div p {}</code></p>
<p>给div下面的p加样式。</p>
<p>在实际开发中，因为要注意选择器的性能，一般父子选择器不超过4层。</p>
<p>像.wrapper .box .content .name这样不超过四层。</p>
<h3 id="7-直接子元素选择器"><a href="#7-直接子元素选择器" class="headerlink" title="7.直接子元素选择器"></a>7.直接子元素选择器</h3><p><code>div&gt;strong</code>,div直接子元素是strong才能被选择。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">√</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">em</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">×</span><br></pre></td></tr></table></figure>
<p>前面举的例子都是标签组合的父子选择器，id、class等也可以使用父子选择器哦。</p>
<h3 id="8-并列选择器"><a href="#8-并列选择器" class="headerlink" title="8.并列选择器"></a>8.并列选择器</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"select"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"select"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>怎么选择出类名是select的div呢？</p>
<p>我们可以使用<code>div.select {}</code>来选择</p>
<p>这种方式是只有div和.select同时作用在一个元素上才会被选择出来。</p>
<h3 id="9-分组选择器"><a href="#9-分组选择器" class="headerlink" title="9.分组选择器"></a>9.分组选择器</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们要想同时选择四个标签，把四个标签的样式都写一遍显然是不太合适的，这里可以用分组选择器<code>div, p, em, strong {}</code>，这样四种标签就都被选择出来并且加上统一的样式了.</p>
<h2 id="选择器的优先级"><a href="#选择器的优先级" class="headerlink" title="选择器的优先级"></a>选择器的优先级</h2><p>如果我们在单独的样式后面加上 !important，那么这个样式就会被赋予最高的优先级，一般后面无论怎么添加样式都不会覆盖或修改这个样式。比如：<code>background-color: red !important;</code>，后面怎么添加样式background-color都是红色的。</p>
<p>由此可见选择器是有优先级的，优先级高的选择器会覆盖优先级低的选择器的样式。</p>
<p>常用选择器的优先级为：!important &gt; 行间样式（通过标签的style属性设置） &gt; id &gt; class|属性 &gt; 标签 &gt; * </p>
<p>我们还需要记住每一种选择器的权重值</p>
<p>CSS选择器 权重值</p>
<p>!important 无穷大</p>
<p>行间样式 1000</p>
<p>id 100</p>
<p>class、属性、伪类 10</p>
<p>标签、伪元素 1</p>
<p>通配符 0</p>
<p>和数学里不一样，在css选择器的权重值中，无穷大 + 1 &gt; 无穷大。</p>
<p>有了选择器权重值，我们就可以计算父子选择器的权重值了。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个选择器的权重值是div + p（两个标签选择器）相加后的结果。</p>
<p>最后需要补充一下：</p>
<ol>
<li>我们一般不给标签加id，而是通过添加class类名来选择，因为id代表唯一标识，我们一般用id来做标记。</li>
<li>我们写类名的时候，一定要注意命名语义化，不要用abc之类无含义的类名。</li>
</ol>
<h2 id="简单的文字样式"><a href="#简单的文字样式" class="headerlink" title="简单的文字样式"></a>简单的文字样式</h2><p>css样式有很多 ，我们不可能一一都记住它们，我们建议记住一些常用的样式，其它的用到时再去查就可以了。</p>
<p>首先我们介绍一下样式的构成，它都是由属性名和属性值构成的，名和值之间用:(冒号)分隔，属性和属性之间用;(分号)分隔。</p>
<p>我们先来介绍几个字体相关的样式。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  font-size: 20px; // 字体大小</span><br><span class="line">  font-weight: bold; // 字体粗细</span><br><span class="line">  font-family: "Times New Roman", Georgia, Serif;// 字体系列</span><br><span class="line">  font-style: italic; // 字体风格</span><br><span class="line">  color: red; // 字体颜色</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>1.font-size</p>
<p>设置文字的大小，默认是16px，这条属性设置的其实是文字的高度而不是宽度。</p>
<p>2.font-weight</p>
<p>设置文字的粗细，默认值是normal，当我们设置成bold的时候，这个p标签就和strong标签没什么区别了，这就是为什么很多标签我们都不用，因为通过修改样式可以达到和其他标签一样的效果。</p>
<p>它的值有：</p>
<p>normal 默认值<br>bold 粗体字符。<br>bolder 更粗的字符。<br>lighter 更细的字符。<br>100、200、300、400、500、600、700、800、900 定义由细到粗的字符，400等同于normal，700等同于bold。</p>
<p>3.font-family</p>
<p>设置文字的样式，是黑体、宋体还是其他什么字体，默认是arial字体。</p>
<p>4.font-style</p>
<p>设置文字是否斜体，italic是斜体的意思，通过设置这个属性我们可以让p标签达到和em标签一样的效果。它可以使用斜体、倾斜或正常字体。</p>
<p>5.color属性</p>
<p>设置文字的颜色</p>
<p>颜色值可以有三种表达方式。</p>
<p>1.英文单词，如red、black、blue等等。</p>
<p>2.三位十六进制组成光学三原色红绿蓝，每一个的值都是00-ff，00代表空，ff代表满，例如#000000就是黑色的意思。其中，如果每连续的两位都是一样的，并且3组数字都是这种情况的时候，我们就可以两两合并只写一个数值就可以了，比如#ffffff —&gt; #fff、 #55ffcc —&gt; #5fc。</p>
<p>3.通过rgb(xx,xx,xx)属性值来设置颜色，其实和第二种是一个意思，只是把十六进制换成了十进制，rgb就是red、green、blue的缩写，三个数值每一项的范围都是0-255，例如红色就是rgb(255, 0, 0)。</p>
<p>接下来我们再介绍其他一些简单的样式。</p>
<p>6.text-indent</p>
<p>设置首行文字的缩进，值有两种单位，一种是px，一种是em。</p>
<p>这里就要提一下em和px的区别了。</p>
<p>px虽然不是一个绝对长度单位，不同设备上显示会有区别，但我们可以简单理解为它是一个差不多固定长度的单位。</p>
<p>em是一个相对长度单位，它相对的是当前元素内的文字的大小，也就是说<code>1em = 1 * font-size</code>,如果我们设置font-size是20px的话，那么1em就是20px，我们只要将text-indent设置成2em就可以实现首行缩进2个文字大小了。</p>
<p>7.border</p>
<p><code>border: 1px solid red;</code>,设置元素边框样式。</p>
<p>这其实是一个复合属性，它由border-width、border-style、border-color三个属性复合而成，分别设置边框的宽度，边框的样式，边框的颜色。其中边框的样式有很多种，常用的有solid（实线）、dotted（短虚线）、dashed（长条虚线）。</p>
<p>border-width也是一个复合属性，它可以按照上右下左来分别设置四个边框的宽度值。</p>
<p>8.text-align</p>
<p>设置文字的位置，值有三种，分别是center(居中)、left(左对齐)、right(右对齐)。</p>
<p>9.line-height</p>
<p>设置一行文字所占的高度，默认和字体大小一样。</p>
<p>当我们想要让单行文字在容器内部上下居中的时候，我们只需要让height = line-height就行了。</p>
<p>10.text-decoration</p>
<p>文字装饰的意思，可以设置文字是否有下划线、上划线、中划线，分别对应的属性值是underline、overline、line-through。</p>
<p>11.cursor</p>
<p>设置我们的鼠标移入到这个元素上的时候，鼠标会变成什么样子。</p>
<p>它的值有很多，常用的是<code>cursor: pointer;</code>这条属性，它会让我们鼠标在移入这个元素的时候，变成可以点击的小手状态。</p>
<p>现在我们就可以来模拟一下a标签的样式了。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  p &#123;</span><br><span class="line">    color: rgb(0, 0, 238); </span><br><span class="line">    text-decoration: underline;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>www.baidu.com<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="伪类"><a href="#伪类" class="headerlink" title="伪类"></a>伪类</h2><p>下面介绍一下伪类。</p>
<p>我们可以通过在标签名后面添加伪类来达到一些效果。</p>
<p>1.hover伪类</p>
<p>这个伪类设置当鼠标移入元素的时候元素的样式。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123; </span></span><br><span class="line">    font-size: 20px;</span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>: <span class="selector-id">#424242</span>; </span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"www.baidu.com"</span>&gt;</span>www.baidu.com<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>给a标签设置这样一个伪类之后，我们就可让鼠标移入a标签后，文字放大（颜色不会变）。</p>
<p>伪类当然不止hover一个，还有很多其他的伪类，这里就不一一介绍了。</p>
<p>伪类也是有权重值的，它的权重值和class一样是10。</p>
<p>前面鼠标移入只会有文字放大效果而不会有变色效果，就是因为行间样式的权重值是1000，而a+hover只有1+10=11。</p>
<h2 id="盒模型"><a href="#盒模型" class="headerlink" title="盒模型"></a>盒模型</h2><p>我们要知道，一个元素是由四部分组成的：margin、border、padding、content，分别是外边距、边框、内边距、内容区。其中content不是由属性构成的，而是由我们写的东西和width、height属性构成的。</p>
<p>margin：它设置的是这个元素距离外面靠近它的其他元素或者浏览器边框的距离。<br>这是一个复合属性，它其实是由margin-top、margin-right、margin-bottom、margin-left组成的，当然也可以分别设置每一个属性的属性值。</p>
<p>这个复合属性的值有4种写法：</p>
<p>1.margin: 10px 20px 30px 50px;分别按照上右下左的顺序设置四个外边距的大小。</p>
<p>2.margin: 10px 20px 30px;分别按照上、左右、下的顺序来设置四个外边距的大小，中间的那个属性值设置的是左右的外边距。</p>
<p>3.margin: 10px 20px;分别按照上下、左右的顺序来设置四个外边距的大小。</p>
<p>4.margin: 10px;四个方向都是这个值。</p>
<p>margin其实不属于一个盒子的模型部分，一个元素的盒子模型只有border、padding、content。</p>
<p>我们只需要在元素上鼠标右键点击检查或者查看，或是按住F12（windows系统），就可以查看元素设置的样式了，最下面也会有元素的盒模型。</p>
<h2 id="margin合并与塌陷"><a href="#margin合并与塌陷" class="headerlink" title="margin合并与塌陷"></a>margin合并与塌陷</h2><p>css也有不完善的地方，存在或多或少的”bug”，有些我们可能从来不会遇到，有些我们可能会经常遇到，这节介绍的就是很经典的两个”bug”。</p>
<h3 id="margin合并"><a href="#margin合并" class="headerlink" title="margin合并"></a>margin合并</h3><p>我们写两个span标签，给它们两个分别加上margin-right和margin-left样式。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.left</span> &#123;</span></span><br><span class="line">  margin-right: 10px;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.right</span> &#123;</span></span><br><span class="line">  margin-left: 10px;</span><br><span class="line">  background-color: yellow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span>left<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span>right<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>这两个span之间的距离正是我们所想的那样是20px，</p>
<p>下面我们写两个div，分别给它们加上margin-bottom和margin-top的样式，我们再看看效果。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.top</span> &#123;</span></span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.bottom</span> &#123;</span></span><br><span class="line">  margin-top: 10px;</span><br><span class="line">  background-color: yellow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"top"</span>&gt;</span>top<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bottom"</span>&gt;</span>bottom<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这次我们惊奇地发现，这两个div上下之间的距离，并不是我们所想的那样是相加的20px，而是只有10px。</p>
<p>这个现象就是margin合并。</p>
<p>我们尝试改变每一个div的margin-top或者margin-bottom的值，最后会发现：二者上下之间的距离取的是两个数值之中的最大值。</p>
<h3 id="margin塌陷"><a href="#margin塌陷" class="headerlink" title="margin塌陷"></a>margin塌陷</h3><p>当我们给父子结构的两个div分别设置margin-top的时候，就会出现这个bug。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.wrapper</span> &#123;</span></span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">    margin-top: 100px;</span><br><span class="line">    margin-left: 100px;</span><br><span class="line">    background-color: yellow;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">  <span class="selector-class">.content</span> &#123;</span></span><br><span class="line">    width: 50px;</span><br><span class="line">    height: 50px;</span><br><span class="line">    margin-top: 50px;</span><br><span class="line">    margin-left: 50px;</span><br><span class="line">    background-color: red;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">“wrapper”</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">“content”</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们写这段代码的原意是想要一个100<em>100大小的div,然后里面有一个50</em>50大小的子div。这个div在父级div的右下角，同时父级div距离浏览器的边框有100px的距离。</p>
<p>然而实际结果并不是这个样子的，子级div的margin-left正常显示了，但是margin-top的效果并不是我们所想的那样距离父级div的距离是50px。</p>
<p>由于子级的div距离浏览器边框的距离是50px，父级div本身有一个margin-top值，所以导致我们子级的margin-top的效果并没有显现出来。我们再改变一下子级div的margin-top值，改成200px，我们惊奇地发现，子级div不仅没有距离父级div有一段距离，反而带动了父级div一起向下移动了！这就是margin塌陷现象。</p>
<h3 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h3><p>答案是触发bfc。</p>
<p>bfc全称是block format context——块级格式化上下文，我们有一些css语法会触发bfc，触发bfc的元素的渲染规则和普通元素的渲染规则相比会变得不一样，从而可以解决塌陷问题。</p>
<p>我们可以利用overflow属性来触发bfc。</p>
<p>overflow是一个css属性，它可以设置当内容区超过了当前元素的区域的时候，我们采取怎样的处理方式，这个属性也可以触发bfc。</p>
<p>现在我们在父级div.wrapper里面加一条属性：overflow:hidden;</p>
<p>这条属性的意思是溢出隐藏。现在我们发现，在外观没有改变的同时，子级div和父级div解除了绑定，可能正常移动了！我们一般可以采用这种方式来解决margin塌陷的问题。</p>
<p>虽然overflow:hidden;的方式可以采用，但也不是没有缺点，一旦我们用js代码改变了子级div的位置，就会有导致子级一部分内容因为溢出而被隐藏。</p>
<p>理解了margin塌陷的解法之后，我们就很容易可以理解margin合并的解法了。</p>
<p>我们给每一个div分别加上一个父级包裹层，然后给父级包裹层都加上overflow:hidden;</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.wrapper</span>&#123;</span></span><br><span class="line">  overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.top</span> &#123;</span></span><br><span class="line">  margin-bottom: 100px;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.bottom</span> &#123;</span></span><br><span class="line">  margin-top: 100px;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"top"</span>&gt;</span>top<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bottom"</span>&gt;</span>bottom<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这样通过父级div来触发bfc就解决了margin合并的问题。</p>
<h2 id="定位与层模型"><a href="#定位与层模型" class="headerlink" title="定位与层模型"></a>定位与层模型</h2><p>层模型</p>
<p>css中元素的层次模型主要是由position这个属性来决定的。</p>
<p>position的意思是定位，它一共有四个值，分别是static、absolute、relative、fixed。</p>
<p>1.static</p>
<p>static是默认值，当我们没有写position属性的时候，元素默认的定位就是static。</p>
<p>2.absolute</p>
<p>absolute是绝对定位的意思，它会使元素脱离本来的位置再进行定位，当元素脱离原来的位置之后，其他的元素就看不到这个元素了。同时，absolute也可以触发bfc。</p>
<p>当我们改变定位之后，这个元素就有四个属性可以使用了，分别是left、right、top、bottom。这四个属性分别可以设置当前元素距离左边、右边、上边和下边的距离为多少，这四个属性很少一起出现，一般都是两两一对出现，其中left和top是一对，right和bottom是一对。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  div &#123;</span><br><span class="line">    width: 100px;</span><br><span class="line"><span class="css">    <span class="selector-tag">height</span><span class="selector-pseudo">:100px</span>;</span></span><br><span class="line">    backgroud-color: red;</span><br><span class="line">    position: absolute;</span><br><span class="line">    left: 100px;</span><br><span class="line">    top: 100px;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个div就会脱离原来的位置，然后距离浏览器上边框和左边框分别100px的距离。</p>
<p>absolute的参照物是距离它最近的有定位（非static）的父级，当没有父级有定位时，元素会相对于浏览器边框进行定位。</p>
<p>3.relative</p>
<p>relative是相对定位的意思，它会让元素保留原来位置再进行定位，后面的元素可以看到它本来的位置。</p>
<p>当position改成relative之后，left、top、right、bottom进行的定位就会变成相对于自身的位置进行移动了。relative定位的参照物是元素自身。</p>
<p>当我们仅仅给元素设置position:relative，而没有设置left、right、top、bottom属性的时候，元素的定位是没有发生任何改变的，正因为这个特性，一般在开发中，relative都是用作设置参照物，一个absolute元素要相对于那个元素进行移动，就给那个元素设置relative定位就可以了。</p>
<p>我们通过例子来看一下absolute和relative的区别。</p>
<p>我们现在有这样一个结构：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.wrapper</span> &#123;</span></span><br><span class="line">      width: 200px;</span><br><span class="line">      height: 200px;</span><br><span class="line">      background-color: orange;</span><br><span class="line">      margin-top: 100px;</span><br><span class="line">      margin-left: 100px;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.box</span>&#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">width</span><span class="selector-pseudo">:100px</span>;</span></span><br><span class="line">      height: 100px;</span><br><span class="line">      background-color: black;      </span><br><span class="line"><span class="css">      <span class="selector-tag">margin-left</span><span class="selector-pseudo">:100px</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.content</span>&#123;</span></span><br><span class="line">      width: 50px;</span><br><span class="line">      height: 50px;</span><br><span class="line">      background-color: yellow;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>现在我们给content加上绝对定位的样式。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.content</span>&#123;</span></span><br><span class="line">    position: absolute;</span><br><span class="line">    left: 50px;</span><br><span class="line">    width: 50px;</span><br><span class="line">    height: 50px;</span><br><span class="line">    background-color: yellow;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>这个时候content那个黄色的小方块会跑到橘黄色的方块外面。</p>
<p>这是因为，当我们给content设置position:absolute，由于没有父级元素有定位，所以content会相对于浏览器边框定位，这时content的left属性就是相对于浏览器边框左边有50px的意思。</p>
<p>如果我们把content的定位换成relative，content黄色小方块在黑色方块的左上角，然后relative相对于自身的位置进行定位，这个时候left属性的意思就是相对于本来在黑色左上角的那个位置向右移动了50px。</p>
<p>因此，总结一下absolute和relative的特点：</p>
<p>absolute：</p>
<p>1.脱离原来位置进行定位</p>
<p>2.相对于最近的有定位的父级进行定位，如果没有那么相对于浏览器边框定位。</p>
<p>relative：</p>
<p>1.保留原来位置定位</p>
<p>2.相对于自己原来位置进行定位，一般被用来设置参照物</p>
<p>4.fixed</p>
<p>fixed定位是相对于视口定位，我们在网页上都见过左右两边不随着鼠标滚轮滚动而改变位置的广告栏，就是用fixed定位的。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.fixed</span> &#123;</span></span><br><span class="line">    position: fixed;</span><br><span class="line">    right: 0px;</span><br><span class="line">    top: 200px;</span><br><span class="line">    height: 200px;</span><br><span class="line">    width: 50px;</span><br><span class="line">    background-color: red;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"fixed"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>.fixed这个元素会一直在视口的右边，不随着滚轮滚动而改变相对于视口的位置。</p>
<p>学习了定位之后，我们就可以实现元素水平垂直居中的效果了。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  div &#123;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">    position: absolute;</span><br><span class="line">    left: 50%;</span><br><span class="line">    top: 50%;</span><br><span class="line">    margin-left: -50px;</span><br><span class="line">    margin-top: -50px;</span><br><span class="line">    background-color: red;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个div就会在有定位的父级里面水平垂直居中哦。</p>
<p>我们还可以实现多栏布局。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  * &#123;</span><br><span class="line">    margin: 0px;</span><br><span class="line">    padding: 0px;</span><br><span class="line">  &#125;</span><br><span class="line">  div &#123;</span><br><span class="line">    height: 100px;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.left</span> &#123;      </span></span><br><span class="line">    position: absolute;</span><br><span class="line">    left: 0;</span><br><span class="line">    width: 100px;</span><br><span class="line">    background-color: yellow;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">    position: absolute;</span><br><span class="line">    right: 0;</span><br><span class="line">    width: 100px;</span><br><span class="line">    background-color: green;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.mid</span> &#123;</span></span><br><span class="line">    margin-left: 100px;</span><br><span class="line">    margin-right: 100px;</span><br><span class="line">    background-color: red;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mid"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>我们首先固定左侧和右侧的两个div，然后让中间的div分别给左侧和右侧留出一个固定宽度的margin之后，让自身自适应屏幕的大小即可实现三栏布局效果。</p>
<h2 id="浮动模型"><a href="#浮动模型" class="headerlink" title="浮动模型"></a>浮动模型</h2><h3 id="浮动模型-1"><a href="#浮动模型-1" class="headerlink" title="浮动模型"></a>浮动模型</h3><p>我们首先写一个二级结构：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.wrapper</span> &#123;     </span></span><br><span class="line"><span class="css">    <span class="selector-tag">width</span><span class="selector-pseudo">:400px</span>;      </span></span><br><span class="line">    height: 100px;      </span><br><span class="line">    border: 1px solid red;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.content</span> &#123;      </span></span><br><span class="line">    width: 100px;      </span><br><span class="line">    height: 100px;</span><br><span class="line">    background-color: black;</span><br><span class="line">    color: white;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>现在我们给content加上一个特殊的属性：float<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.content</span> &#123;      </span></span><br><span class="line">    width: 100px;      </span><br><span class="line">    height: 100px;</span><br><span class="line">    float: left;</span><br><span class="line">    background-color: black;</span><br><span class="line">    color: white;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>.content元素就会像站队列一样排列了，这就是float属性的效果哦。</p>
<p>下面来正式介绍一下float属性</p>
<p>float属性可以让元素像站队列一样浮动起来，它会让本来占满整行的元素只按照内容和设置的大小在父级里面进行站队排列，当这一行剩余的空间不足以再放下一个元素的时候，元素就会自动换行，到下一行去进行浮动排列。当容器不够大的时候，虽然内容会超出容器的范围，但是超出之后仍然会按照相同的队形来进行站队。</p>
<p>浮动元素会像absolute的元素一样脱离文档流，但不会脱离文字流，这是什么意思呢？</p>
<p>我们来举一个例子：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.top</span> &#123;      </span></span><br><span class="line">    width: 100px;      </span><br><span class="line">    height: 100px;      </span><br><span class="line">    background-color: red;      </span><br><span class="line">    float: left;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.bottom</span> &#123;      </span></span><br><span class="line">    width: 200px;      </span><br><span class="line">    height: 200px;</span><br><span class="line">    background-color: black;</span><br><span class="line">    color: white;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"top"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bottom"</span>&gt;</span>我是文字，我能看到文字流哟~<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>脱离文档流的意思就是正常的元素看不到它了，这一点很类似absolute属性，不脱离文字流的意思则是display属性是inline或者inline-block的元素还是可以看到它的，文字本身是inline属性的。</p>
<p>接下来，我们讲.bottom这个div的display改成inline-block，再看一下效果。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.bottom</span> &#123;      </span></span><br><span class="line">    width: 200px;      </span><br><span class="line">    height: 200px;</span><br><span class="line">    background-color: black;</span><br><span class="line">    color: white;</span><br><span class="line">    display: inline-block;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>我们发现下面的黑色方块并没有移动到下一行，而是紧跟着红色浮动方块进行了排列，但是我们并没有给黑色方块设置浮动效果啊？</p>
<p>这是因为，float属性会自动将这个元素的display给改成inline-block，也就是说，只要有float属性，那么这个元素的display就是inline-block，这就是为什么红色浮动方块没有独占一行的原因了。</p>
<p>float属性只有两个值：left和right，默认的状态是none。</p>
<p>right的效果就是从右边开始排列，left则相反。</p>
<p>下面我们来总结一下float属性</p>
<p>1.可以像absolute一样，让元素浮动起来，产生自己独有的浮动流。</p>
<p>2.脱离标准的文档流，但不会脱离文字流，正常的元素看不到它，但是有文字属性inline或inline-block的元素可以看到它。</p>
<p>3.在内部把改元素变成display: inline-block。</p>
<p>开发中，一般进行网状布局时可以使用float属性。当我们不知道容器里面会盛放多少个子元素，但是这些子元素又是按照一样的格式进行排列的，我们可以设置浮动来进行流式布局。浮动属性还可以让我们实现像报纸那样文字包围在图片四周的效果。</p>
<p>那么如何清除浮动流呢？</p>
<p>我们说了，元素浮动起来之后，正常的元素就看不到它了，包裹它的父级自然也看不到它了，我们想让父级根据里面浮动的子元素来自适应宽高，如果不清除浮动的话，父级就只剩下一条线了！</p>
<p>那么怎么来清除浮动呢？</p>
<p>1.我们先来一个不规范的写法解释下原理，我们在父级里面的内容区最后加一个p标签。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"clear"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们给这个p标签增加清除浮动的样式：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.clear</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="comment">/* clear属性专门用来清除浮动的，虽然有还有left和right值，但是我们清除浮动一般都写both值。 */</span></span></span><br><span class="line">    clear: both;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>这时，父级的wrapper已经正常包裹住子元素了。</p>
<p>但实际上，并不是父级清除了浮动流，而是被p撑开了，p.clear标签能看到上面浮动的元素，wrapper能看到不浮动的p标签，因此就把p标签包裹进去了，仅此而已。</p>
<p>我们要知道html中的标签是做结构规划的，这个p标签只是清除浮动的功能，不具备p标签的段落语义，这种代码在html里是不规范的，因此不适用。</p>
<p>所以我们采用添加伪元素的方法</p>
<p>我们首先介绍一下伪元素。</p>
<p>伪元素是一种不能单独存在的元素，它必须要依附于其他元素标签使用，伪元素常用的一共有两个：after和before。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  span &#123;</span><br><span class="line">    background-color: yellow;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-tag">span</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line">    content: '前';</span><br><span class="line">    background-color: red;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-tag">span</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">    content:'后';</span><br><span class="line">    background-color: black;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>当我们不想改变html结构，又想增添一些东西的时候，伪元素after和before就非常实用。</p>
<p>要注意的是，写伪元素，即使内容是空的，也要加上content这个属性content:””。</p>
<p>既然是伪元素，那么自然也属于元素了，我们可以改变伪元素的display为block，从而可以改变宽高等块级元素才有的样式。</p>
<p>了解伪元素之后，我们根据第一种方式，为父级元素添加一个after伪元素，让这个伪元素专门实现清除浮动的功能：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.wrapper</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">    content: '';</span><br><span class="line">    clear: both;</span><br><span class="line">    display: block;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>这就是我们通常使用的清除浮动的方法。</p>
<p>然而在ie6、ie7并没有伪元素这种东西，怎么办？</p>
<p>前面我们介绍了bfc，这里我们介绍ie6、ie7独有的一个东西——hasLayout。只要触发了hasLayout就和触发bfc有差不多的作用，我们可以用zoom属性来触发它。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="comment">/* 视口同比例放大还是缩小，1就是不变 */</span></span><br><span class="line">  <span class="attribute">zoom</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当我们写上这个元素的时候，ie6、ie7也可以清除浮动了。</p>
<p>不过我们其他的浏览器并不需要zoom这个属性，这个属性只是为了ie6和ie7准备的，这个时候我们需要一点点css hack，我们在zoom前面加一个<em>号， </em>zoom: 1; 这个符号只有ie6和ie7能够识别，其他的浏览器都不识别，这样就可以让ie6和ie7去读这一行属性，其他浏览器直接忽略。顺便一提属性前面加上”_”之后，就只有ie6可以识别了（_zoom: 1）。</p>
<p>另外我们还可以触发bfc来清除浮动</p>
<p>有很多属性都可以触发bfc：</p>
<p>① 给.wrapper添加overflow:hidden; 可以让父级包裹住浮动子元素。</p>
<p>② 给.wrapper添加display: inline-block; 可以让父级彻底包裹住浮动子元素。</p>
<p>③ 给.wrapper添加position:absolute; 可以让父级彻底包裹住浮动子元素。</p>
<p>虽然这三种方式都可以清除浮动，但都会改变样式，不符合开发规范，因此我们基本不使用。</p>
<p>我们学习了浮动模型之后，也可以用这种方式来实现三栏布局哦<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">    width: 50px;</span><br><span class="line">    height: 50px;</span><br><span class="line">    background-color: red;</span><br><span class="line">    float: left;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">    width: 50px;</span><br><span class="line">    height: 50px;</span><br><span class="line">    background-color: yellow;</span><br><span class="line">    float: right;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.mid</span> &#123;</span></span><br><span class="line">    margin-left: 50px;</span><br><span class="line">    margin-right: 50px;</span><br><span class="line">    height: 50px;</span><br><span class="line">    background-color: green;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mid"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="css背景图片和其它"><a href="#css背景图片和其它" class="headerlink" title="css背景图片和其它"></a>css背景图片和其它</h2><h3 id="单行文字溢出打点"><a href="#单行文字溢出打点" class="headerlink" title="单行文字溢出打点"></a>单行文字溢出打点</h3><p>溢出打点是指当文字超过我们所规定的范围，后面的文字就以”…”的形式表现。</p>
<p>它由三个属性组合来完成：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  div &#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    height: 20px;</span><br><span class="line">    background-color: red;</span><br><span class="line"></span><br><span class="line">    overflow: hidden;</span><br><span class="line">    white-space: nowrap;</span><br><span class="line">    text-overflow: ellipsis;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  单行文字溢出测试单行文字溢出测试单行文字溢出测试单行文字溢出测试单行文字溢出测试单行文字溢出测试单行文字溢出测试单行文字溢出测试</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>我们可以看到文字溢出打点了。</p>
<p>现在我们来介绍这三个属性</p>
<p>1.overflow: hidden; 让文字溢出容器的部分隐藏起来。</p>
<p>2.white-space: nowrap; 让文字不换行。文字默认是换行的。</p>
<p>3.text-overflow: ellipsis; 文字溢出之后，怎么处理。这里的处理方式是以点状显示。</p>
<p>这样三条属性配合使用，就可以实现单行文字溢出打点的功能了。</p>
<h3 id="多行文字溢出打点"><a href="#多行文字溢出打点" class="headerlink" title="多行文字溢出打点"></a>多行文字溢出打点</h3><p>多行文字溢出打点的css兼容性不是很好，需要较高版本浏览器的支持，所以有的是通过计算文字宽高，然后手写”…”实现的。</p>
<p>如果我们想要以属性的方式实现，可以这么写：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  div &#123;</span><br><span class="line">    width: 100px;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    text-overflow: ellipsis;</span><br><span class="line">    display: -webkit-box;</span><br><span class="line">    -webkit-line-clamp: 3;</span><br><span class="line">    -webkit-box-orient: vertical;</span><br><span class="line">    background-color: red;</span><br><span class="line">    color: black;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>这里的-webkit-前缀的意思是webkit内核的浏览器私有属性。</p>
<h3 id="背景图片"><a href="#背景图片" class="headerlink" title="背景图片"></a>背景图片</h3><p>我们知道<code>&lt;img&gt;</code>标签可以展示图片，但是如果我们想要在图片上面写字的话，这个标签就不太好用了，这个时候就需要用到一个叫作background-image（背景图片）的属性了。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background-image</span>: <span class="selector-tag">url</span>();</span><br></pre></td></tr></table></figure>
<p>url里面放图片地址，这样我们就可以给一个元素设置背景图片了，然后元素里面正常写文字就可以了。</p>
<p>还有一些其他的属性专门用来修饰背景图片样式的：</p>
<p>background-size</p>
<p>设置背景图片大小。</p>
<p>它有很多值：</p>
<p>1.cover（覆盖）</p>
<p>可以让浏览器用一张图片尽可能填充满我们的容器，当图片大的时候会截掉多余部分。</p>
<p>它的填充机制是：先等比例放大(或缩小)图片至宽度或高度等于元素的宽或高，看哪种方式可以让一张图片填充满整个元素，再裁减掉多余的部分。</p>
<p>2.contain（包含）</p>
<p>尽可能展示图片的全部信息，如果有剩余空间，就填充相同的图片。</p>
<p>它的填充机制是：固定一条边之后，让另外一条边可以全部显示，有剩余的部分就填充相同的图片。</p>
<p>3.设置x y 像素值</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background-size</span>: 50<span class="selector-tag">px</span> 50<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure>
<p>这样会让浏览器强行把图片展示成50*50的大小。</p>
<p>4.百分数</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background-size</span>: 50% 50%;</span><br></pre></td></tr></table></figure>
<p>会让图片占容器宽高的50%，子级元素的百分比相对数值是父级里面这个属性的值，比如父级的高度是100px，那么子级的50%就是50px。</p>
<p>background-repeat</p>
<p>设置背景图片是否可以重复显示，默认是重复的repeat。也就说默认状态下，容器空余很多的时候，就会有相同的图片来填充容器剩余的空间。</p>
<p>而值为no-repeat时，不论容器剩余多少空间，都不会进行图片复制填充。</p>
<p>background-position</p>
<p>设置背景图片开始的位置，它的值同样有很多种：</p>
<p>1.像素</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background-position</span>: 50<span class="selector-tag">px</span> 50<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure>
<p>这样背景图片就会从容器的x轴50px y轴50px的位置开始显示。</p>
<p>2.百分比</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.background-position</span>: 50% 50%;</span><br></pre></td></tr></table></figure>
<p>当写50% 50%的时候，图片刚好会在容器的正中央显示。</p>
<p>》》》》》》》》</p>
<h1 id="js-ECMAScript-5"><a href="#js-ECMAScript-5" class="headerlink" title="js(ECMAScript 5)"></a>js(ECMAScript 5)</h1><h2 id="初识JavaScript"><a href="#初识JavaScript" class="headerlink" title="初识JavaScript"></a>初识JavaScript</h2><p>JavaScript作为Netscape Navigator浏览器的一部分首次出现在1996年，它最初的设计目的是为了改善网页的用户体验。</p>
<p>ECMA为了统一js，推出了ECMA标准，因此js语言也可以被称为ECMAScript。本章我们介绍的是ECMAScript 5的知识，es6会在后面章节介绍。</p>
<p>js有两个特点</p>
<ol>
<li><p>解释性语言，不需要代码编译，可以跨平台。</p>
</li>
<li><p>单线程</p>
</li>
</ol>
<p>在浏览器中，js有三大部分：ECMAScript、DOM、BOM。</p>
<ol>
<li><p>ECMAScript：符合ECMA标准的javascript语言。</p>
</li>
<li><p>DOM：文档对象模型（Document Object Model），可以操作网页。</p>
</li>
<li><p>BOM：浏览器对象模型（Browser Object Model），可以操作浏览器。</p>
</li>
</ol>
<h2 id="引入JavaScript"><a href="#引入JavaScript" class="headerlink" title="引入JavaScript"></a>引入JavaScript</h2><p>在网页中引入JavaScript有两种方法。</p>
<p>1.页面内嵌script标签</p>
<p>我们可以在<code>&lt;head&gt;&lt;/head&gt;</code>标签或者<code>&lt;body&gt;&lt;/body&gt;</code>标签里面写一个<code>&lt;script&gt;&lt;/script&gt;</code>标签，这个标签有一个type属性，我们赋值为”text/javascript”，也可以不写type属性，浏览器默认就是这个。</p>
<p>写完标签后，我们就可以在这个标签里写js代码了。</p>
<p>2.引入外部js文件</p>
<p>script标签有个src属性可以引入外部js文件。</p>
<p>一个script标签只能在里面写代码或者引入外部js文件，不能既引入又在里面写代码。</p>
<p>我们一般采用第二种引入外部js文件的方法，结构(html)、样式(css)、行为(js)相分离，方便维护。</p>
<p>浏览器在加载html文件的时候，当遇到link标签会异步加载，但遇到script标签，会阻塞后面内容的加载，直到js文件下载并执行完毕。</p>
<p>这样就会导致两个问题</p>
<p>1.如果js操作DOM的话，页面的DOM还没有解析，js操作DOM就会出错。</p>
<p>2.如果js文件较大、执行较慢，会导致页面一直没有内容出现。</p>
<p>所以，我们一般会把script标签写在body标签中最后一行。 </p>
<h2 id="JavaScript基本语法"><a href="#JavaScript基本语法" class="headerlink" title="JavaScript基本语法"></a>JavaScript基本语法</h2><h3 id="变量声明"><a href="#变量声明" class="headerlink" title="变量声明"></a>变量声明</h3><p>js是弱数据类型语言，任何类型的变量都可以用关键字var来声明</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span>  arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> num = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"abc"</span>;</span><br></pre></td></tr></table></figure>
<p>也可以先声明，再赋值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num;</span><br><span class="line">num = <span class="number">123</span>;</span><br></pre></td></tr></table></figure>
<p>当我们要声明多个变量的时候，一般采用下面这种写法节省代码量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num1 = <span class="number">123</span>,</span><br><span class="line">    num1= <span class="number">123</span>,</span><br><span class="line">    num2 = <span class="number">123</span>;</span><br></pre></td></tr></table></figure>
<h3 id="变量命名规则"><a href="#变量命名规则" class="headerlink" title="变量命名规则"></a>变量命名规则</h3><p>1.以英文字母、_、$符号开头。</p>
<p>2.变量名可以包括数字。</p>
<p>3.不可以使用关键字、保留字作为变量名。</p>
<p>关键字是被系统定义了语法的单词，如var、window、if、else等。</p>
<p>保留字是以后可能会变成关键字而做的保留词，如enum、abstract等。</p>
<h3 id="值类型"><a href="#值类型" class="headerlink" title="值类型"></a>值类型</h3><p>js数据的值主要分为两大类：</p>
<p>1.原始值</p>
<p>Number、String、Boolean、undefined、null</p>
<p>undefined是未定义的意思，null是空值的意思。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> demo = <span class="literal">null</span>;</span><br><span class="line"><span class="built_in">console</span>.log(demo); <span class="comment">//null</span></span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<p>2.引用值</p>
<p>主要有：数组array、对象object、函数function</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">  name: <span class="string">"demo"</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">// 1,2,3,4</span></span><br><span class="line"><span class="built_in">console</span>.log(object);<span class="comment">// [Object Object]</span></span><br><span class="line"><span class="built_in">console</span>.log(object.name);<span class="comment">// demo</span></span><br></pre></td></tr></table></figure>
<p>这两种数据类型的区别在哪里呢？</p>
<p>举一个例子：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">123</span>,</span><br><span class="line">    num1 = num;</span><br><span class="line">num = <span class="number">234</span>;</span><br><span class="line"><span class="built_in">console</span>.log(num);<span class="comment">// 234</span></span><br><span class="line"><span class="built_in">console</span>.log(num1);<span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// num的改变对num1完全没有影响。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">    arr1 = arr;</span><br><span class="line">arr.push(<span class="number">4</span>);</span><br><span class="line">arr.push(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">// 1,2,3,4,5</span></span><br><span class="line"><span class="built_in">console</span>.log(arr1);<span class="comment">// 1,2,3,4,5</span></span><br></pre></td></tr></table></figure></p>
<p>我们发现我们只是改变了arr的值，但是arr1也跟着改变了，这就是两种数据类型的第一个区别。</p>
<p>如果我们给arr重新赋值一个新的数组的话，那么arr1并不是这个新的数组。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];<span class="comment">// 重新开辟了一个堆空间</span></span><br><span class="line"><span class="built_in">console</span>.log(arr1);<span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure></p>
<p>因为原始值是存放在栈里面的，而引用值是存放在堆里面的，原始值的赋值是把值的内容赋值给另一个变量，但是引用值却不是这样。引用值的变量名存在栈里面，但是值却是存在堆里面的，栈里面的变量名只是指向了一个堆空间，这个堆空间存的是我们一开始赋的值，当我们写arr1 = arr的时候，其实是把arr1指向了和arr指向的同一个堆空间，这样当我们改变arr的内容的时候，其实就是改变这个堆空间的内容，自然同样指向这个堆空间的arr1的值也随着改变了。</p>
<p>栈内存不同，它被赋值后就不可以改变了，即使我们给num重新赋值为234，也是在栈里面重新开辟了一块空间赋值234，前面存放123的空间还存在，只是没有指针指向这里罢了。</p>
<p>两种数据类型的第二点区别是：原始值不可以被改变，引用值可以被改变。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">arr.length = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">//1,2</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"1234"</span>;</span><br><span class="line">str.length = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str);<span class="comment">//1234</span></span><br></pre></td></tr></table></figure></p>
<p>这里涉及了一个包装类的概念，我们后面会提到。</p>
<h3 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h3><p>1.+ 运算符</p>
<p>作用：</p>
<p>1.数学上相加的功能</p>
<p>2.拼接字符串</p>
<p>字符串和任何数据相加都会变成字符串<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span> + <span class="number">2</span> + <span class="string">"3"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(num);<span class="comment">//33</span></span><br></pre></td></tr></table></figure></p>
<p>2.– 运算符</p>
<p>数学上的相减功能</p>
<p>3.* 运算符</p>
<p>数学上的相乘功能</p>
<p>4./ 运算符</p>
<p>数学上的相除功能</p>
<p>5.% 运算符</p>
<p>数学上的取余功能</p>
<p>6.= 运算符</p>
<p>赋值运算符</p>
<p>7.== 运算符</p>
<p>比较运算符中的等于，不属于严格等于，严格等于是”===”三个等号</p>
<p>8.() 运算符</p>
<p>和数学上一样，加括号的部分优先级高</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span> + <span class="string">"2"</span> + (<span class="number">1</span> + <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(num);<span class="comment">//122</span></span><br></pre></td></tr></table></figure>
<p>9.++ 运算符</p>
<p>自加一运算，当写在变量前面的时候是先加1再执行运算，写在变量后面的时候是先运算再加1。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(num ++);<span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(num);<span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log(++num);<span class="comment">//3</span></span><br><span class="line"><span class="built_in">console</span>.log(num);<span class="comment">//3</span></span><br></pre></td></tr></table></figure>
<p>相类似的运算还有—- 运算符</p>
<p>10.+= 运算符</p>
<p>让变量加多少<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line">num += <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(num);<span class="comment">//11</span></span><br></pre></td></tr></table></figure></p>
<p>相类似的还有 -=、/=、*-、%= 等等</p>
<h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><p>比较运算符有 &gt; 、&lt; 、&gt;= 、&lt;= 、!= 、==、不严格等于、===严格等于。</p>
<p>下面介绍一下不严格等于和严格等于的区别</p>
<p>不严格等于是当我们比较两个数据的时候，是先转化成同一个类型的数据之后再进行比较的，而严格等于是两个数据不进行数据转化也相等。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"2"</span> === <span class="number">2</span><span class="comment">//false</span></span><br><span class="line"><span class="string">"2"</span> == <span class="number">2</span><span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>NaN不等于任何数据，包括它本身，但undefined就等于它本身。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">NaN</span> == <span class="literal">NaN</span><span class="comment">//false</span></span><br><span class="line"><span class="literal">NaN</span> === <span class="literal">NaN</span><span class="comment">//false</span></span><br><span class="line"><span class="literal">undefined</span> == <span class="literal">undefined</span><span class="comment">//true</span></span><br><span class="line"><span class="literal">undefined</span> === <span class="literal">undefined</span><span class="comment">//true</span></span><br><span class="line"><span class="keyword">var</span> demo = !!<span class="string">"abc"</span>;<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>这里的demo要进行取反运算，先进行了类型转换为布尔值false，再次取反之后为true，取反运算可以用来将数据转换成布尔值。</p>
<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><p>逻辑运算符主要有 &amp;&amp; 和 || （与和或）<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> demo = <span class="number">1</span> &lt; <span class="number">2</span> &amp;&amp; <span class="number">3</span>;<span class="comment">//3</span></span><br></pre></td></tr></table></figure></p>
<p>&amp;&amp;的作用是只有是true的时候，才会继续往后执行，一旦第一个表达式就错了，后面的第二个表达式根本不执行。如果前面表达式的返回结果都是true的话，那么&amp;&amp;的返回结果就是最后一个表达式的结果，如样例中的demo是3。</p>
<p>||的作用是只要有一个表达式是true，那么就结束，后面的就不走了，返回的结果就是这个正确的表达式的结果，如果前面的表达式都是false的话，那么返回结果就是最后一个表达式的结果。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> demo = <span class="number">2</span> &lt; <span class="number">1</span> || (<span class="number">1</span> == <span class="number">1</span>);<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>&amp;&amp;有当做短路语句的作用，比如我们可以把简单的if语句用&amp;&amp;来写，因为只有第一个条件成立的时候，才会运行第二个表达式。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(flag) &#123; <span class="built_in">console</span>.log(<span class="string">"hello"</span>); &#125;;</span><br><span class="line">flag &amp;&amp; <span class="built_in">console</span>.log(<span class="string">"hello"</span>);</span><br></pre></td></tr></table></figure></p>
<p>||有赋初始值的作用，有时候我们希望函数参数有一个初始值，在不使用ES6的语法的情况下，可以使用或语句。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span> (<span class="params">example</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> example = example || <span class="number">100</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>不过这里有一个缺点，当我们传的参数是一个布尔值且为false时，会忽略掉我们传递的这个参数值而取默认初始值，ES6中的默认赋值方式可以避免这个问题。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span> (<span class="params">example = <span class="number">100</span></span>) </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="默认为false的值"><a href="#默认为false的值" class="headerlink" title="默认为false的值"></a>默认为false的值</h3><p>所有的值都可以被转换成true或false，转换成true的值实在太多了，我们只需记住转换成false的值即可，其他的都是true。</p>
<p>默认为false：<br>false、undefined、null、””、NaN、0(+0、-0)。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>(<span class="literal">undefined</span>));<span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>(<span class="literal">null</span>));<span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>(<span class="string">""</span>));<span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>(<span class="literal">NaN</span>));<span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>(<span class="number">0</span>));<span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>(<span class="literal">false</span>));<span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>
<h3 id="显示类型转换"><a href="#显示类型转换" class="headerlink" title="显示类型转换"></a>显示类型转换</h3><p>操作符typeof可以检测数据的类型。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(<span class="number">123</span>));<span class="comment">//number</span></span><br></pre></td></tr></table></figure></p>
<p>typeof能返回的类型一共只有6种：</p>
<p>number、string、boolean、undefined、object、function</p>
<p>• 数组和null类型都属于object，null通常用来作为对象占位符，所以归到了object里面。</p>
<p>• NaN属于number类型。非数也是数字的一种。</p>
<p>• typeof返回的结果是字符串</p>
<p>1.Number(mix)</p>
<p>这个方法可以把其他类型的数据转换成数字类型的数据<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>(<span class="string">"123"</span>) <span class="comment">// 123</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">true</span>) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">undefined</span>) <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure></p>
<p>2.parseInt(string, radix)</p>
<p>这个方法可以将字符串转换成整型数字，第二个参数radix基底是可选参数,它的范围是2~36。</p>
<p>当参数string里面既包括数字字符串又包括其他字符串的时候，它看到其他字符串就不会继续转换后面的数字型字符串了。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">"123abc345"</span>)<span class="comment">//123</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"abc123"</span>)<span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"123"</span>)<span class="comment">//123</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"abc"</span>)<span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="literal">true</span>)<span class="comment">//NaN</span></span><br></pre></td></tr></table></figure></p>
<p>第二个参数radix作用是，把第一个参数的数字当成几进制数字来转换成十进制。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> demo = <span class="number">11</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(demo, <span class="number">16</span>));<span class="comment">//17</span></span><br></pre></td></tr></table></figure></p>
<p>3.parseFloat(string)</p>
<p>这个方法和parseInt方法类似，是将字符串转换成浮点类型的数字，同样是碰到第一个非数字型的字符停止，但是由于浮点型数据有小数点，所以它还会识别第一个小数点以及后面的数字，但是第二个小数点就无法识别了。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseFloat</span>(<span class="string">"123.2.3"</span>)<span class="comment">//123.2</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">"123.2abc"</span>);<span class="comment">//123.2</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">"123.abc"</span>)<span class="comment">//123</span></span><br></pre></td></tr></table></figure></p>
<p>4.toString(radix)</p>
<p>这个方法是对象上的方法，绝大多数数据类型都可以使用（undefined和null没有toString方法），它将数据转换成字符串类型，涉及到包装类的一些知识。radix是可选参数。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> demo = <span class="number">123</span>;</span><br><span class="line">demo.toString();<span class="comment">//'123'</span></span><br><span class="line"><span class="literal">true</span>.toString()<span class="comment">//'true'</span></span><br></pre></td></tr></table></figure></p>
<p>当写radix基底的时候，代表我们要将这个数字转化成几进制的数字型字符串。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> demo = <span class="number">10</span>;</span><br><span class="line">demo.toString(<span class="number">16</span>)<span class="comment">//a</span></span><br></pre></td></tr></table></figure></p>
<p>5.String(mix)</p>
<p>把任何类型转换成字符串类型。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span>(<span class="built_in">String</span>(<span class="number">123</span>));<span class="comment">//string</span></span><br></pre></td></tr></table></figure>
<p>6.Boolean(mix)</p>
<p>把任何类型转换成布尔类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Boolean</span>(<span class="number">0</span>);<span class="comment">//false</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="literal">undefined</span>);<span class="comment">//false</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="literal">null</span>);<span class="comment">//false</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="string">""</span>);<span class="comment">//false</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="literal">NaN</span>);<span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<h3 id="隐式类型转换"><a href="#隐式类型转换" class="headerlink" title="隐式类型转换"></a>隐式类型转换</h3><p>1.isNaN()</p>
<p>这个方法可以检测数据是不是非数类型。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">isNaN</span>(<span class="literal">NaN</span>);<span class="comment">//true</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">"abc"</span>);<span class="comment">//true</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="number">123</span>);<span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>
<p>这中间隐含了隐式转换，它会先将你传的参数调用一下Number方法之后，再看看结果是不是NaN。</p>
<p>2.算术运算符</p>
<p>++会将数据调用一遍Number之后，再自加一。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> demo = <span class="string">"abc"</span>;</span><br><span class="line">demo ++;<span class="comment">//NaN</span></span><br><span class="line">demo = <span class="string">"123"</span>;</span><br><span class="line">++demo;<span class="comment">//124</span></span><br><span class="line">demo = <span class="string">"123"</span>；</span><br><span class="line">demo++;<span class="comment">//123 而非  "123"</span></span><br></pre></td></tr></table></figure></p>
<p>++放在后面，虽然是执行完之后才加一，但是执行之前就会调用Number进行类型转换。</p>
<p>3.一目运算符</p>
<p>+、-、*、/在执行之前都会先进行类型转换，转换成数字类型再进行运算。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="literal">false</span>;</span><br><span class="line">+num;<span class="comment">//0</span></span><br><span class="line"><span class="keyword">var</span> demo = <span class="literal">true</span>;</span><br><span class="line">-demo;<span class="comment">//-1</span></span><br><span class="line"><span class="keyword">var</span> demo = <span class="string">"abc"</span>;</span><br><span class="line">+demo;<span class="comment">//NaN</span></span><br><span class="line"><span class="number">1</span> * <span class="string">"2"</span>;<span class="comment">//2</span></span><br><span class="line"><span class="literal">true</span> * <span class="literal">false</span>;<span class="comment">//0</span></span><br><span class="line"><span class="literal">false</span> / <span class="literal">false</span>;<span class="comment">//NaN</span></span><br><span class="line"><span class="literal">true</span> / <span class="literal">false</span>;<span class="comment">//infinity无穷大</span></span><br><span class="line">-<span class="literal">true</span> / <span class="literal">false</span>;<span class="comment">//-infinity</span></span><br></pre></td></tr></table></figure>
<p>4.逻辑运算符</p>
<p>&amp;&amp;和||都是先把表达式调用Boolean，换成布尔值再进行判断是true还是false，不过返回的结果还是本身表达式的结果。</p>
<p>5.！取反操作符</p>
<p>返回的结果也是调用Boolean方法之后的结果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="string">"abc"</span>;<span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p>当然也有不发生类型转换的比较运算符</p>
<p>===严格等于</p>
<p>!==严格不等于</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"123"</span> === <span class="number">123</span>;<span class="comment">//false</span></span><br><span class="line"><span class="literal">true</span> === <span class="string">"true"</span>;<span class="comment">// false</span></span><br><span class="line"><span class="number">1</span> !== <span class="string">"1"</span>;<span class="comment">// true</span></span><br><span class="line"><span class="number">1</span> !== <span class="number">1</span>;<span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h3 id="对象创建方法"><a href="#对象创建方法" class="headerlink" title="对象创建方法"></a>对象创建方法</h3><p>对象的创建方法有三种：</p>
<p>1.对象字面量<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br></pre></td></tr></table></figure></p>
<p>这样方式叫做字面量，是我们创建对象最简单、最常用的方法。</p>
<p>对象里面有属性，属性之间用逗号分隔，每一条属性都有属性名和属性值，属性名和属性值之间用冒号分隔。</p>
<p>2.构造函数</p>
<p>构造函数分两种：系统自带的构造函数和我们自定义的构造函数。</p>
<p>我们先介绍下系统自带的构造函数</p>
<p>创建对象的构造函数是Object</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br></pre></td></tr></table></figure>
<p>通过这条语句，我们创建了一个空对象。</p>
<p>它和<code>var obj = {};</code>的作用是一样的。</p>
<p>系统自带的构造函数还有很多，比如Number、String、Boolean、Array。</p>
<p>我们常用的还是自定义构造函数</p>
<p>自定义构造函数也是正常的函数，我们为了区分它们，我们一般会把构造函数的首字母大写。</p>
<p>这里就声明了一个构造函数Person。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>有了构造函数后，我们就可以用new操作符来创建对象了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">typeof</span> oPerson;<span class="comment">//object</span></span><br></pre></td></tr></table></figure>
<p>这里我们创建了一个对象person，不过现在这个对象是空对象，因为我们构造函数什么都没有写，我们也没有给这个对象添加任何属性。</p>
<p>另外，用new操作符创建出来的对象，尽管都是使用的是同一个构造函数，但是对象之间是没有关联的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person();</span><br><span class="line">person1.name = <span class="string">"111"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(person2.name);<span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<p>person1和person2之间没有关联，它们是两个单独的对象。</p>
<p>我们在构造函数里面写一些对象默认就有的属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"scarlett"</span>,</span><br><span class="line">  <span class="keyword">this</span>.age = <span class="number">17</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line">person.name;<span class="comment">//scarlett</span></span><br></pre></td></tr></table></figure>
<p>当然构造函数既然是函数，那么就可以传参数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">"scarlett"</span>, <span class="number">18</span>);</span><br><span class="line">person.age;<span class="comment">//18</span></span><br></pre></td></tr></table></figure>
<p>创建对象的时候，只有使用new操作符才会有this。</p>
<p>为什么我们通过new操作符可以创建互相独立的对象呢？</p>
<p>其实，当我们调用new操作符的时候，这个new在我们的构造函数里面隐式创建了一个this对象，并且最后返回了这个this对象，这就是为什么我们通过new可以创建一个对象的原因。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//var this = &#123;&#125;;</span></span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="comment">//retrun this;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果我们在构造函数首行手动创建一个对象，比如that对象，然后最后返回that，那么里面的this就没有用了，这样我们为属性赋值就要用that了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> that = &#123;</span><br><span class="line">    name: <span class="string">"scarlett"</span></span><br><span class="line">  &#125;;</span><br><span class="line">  that.name = name;</span><br><span class="line">  <span class="keyword">return</span> that;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">"demo"</span>);</span><br><span class="line">person.name;<span class="comment">//demo</span></span><br></pre></td></tr></table></figure>
<p>如果我们最后返回对象，那么this就失效。如果最后显示返回的是原始值，那么this还是有效的。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> that = &#123;&#125;;</span><br><span class="line">    that.name = <span class="string">"that"</span>;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">"this"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line">person.name;<span class="comment">//this</span></span><br></pre></td></tr></table></figure></p>
<h3 id="对象属性的增删改查"><a href="#对象属性的增删改查" class="headerlink" title="对象属性的增删改查"></a>对象属性的增删改查</h3><p>1.增</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">obj.name = <span class="string">"scarlett"</span>;</span><br><span class="line">obj.name;<span class="comment">//scarlett</span></span><br></pre></td></tr></table></figure>
<p>我们可以通过对象名+点+属性名的方式来给对象添加新的属性并赋值。</p>
<p>2.改</p>
<p>修改操作和增加操作其实是一样的，只要调用相同的属性名然后赋一个新值就可以了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">"scarlett"</span></span><br><span class="line">&#125;</span><br><span class="line">obj.name = <span class="string">"demo"</span>;</span><br><span class="line">obj.name;<span class="comment">//demo</span></span><br></pre></td></tr></table></figure>
<p>3.查</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">obj.name = <span class="string">'demo'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj.name);<span class="comment">//demo</span></span><br></pre></td></tr></table></figure>
<p>4.删</p>
<p>删除属性的操作我们需要借助delete操作符<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">"scarlett"</span></span><br><span class="line">&#125;</span><br><span class="line">obj.name;<span class="comment">//scarlett</span></span><br><span class="line"><span class="keyword">delete</span> obj.name;</span><br><span class="line">obj.name;<span class="comment">//undefined</span></span><br></pre></td></tr></table></figure></p>
<h3 id="对象的枚举"><a href="#对象的枚举" class="headerlink" title="对象的枚举"></a>对象的枚举</h3><p>查看对象属性我们知道可以用obj.name这样的点操作符来查看，但是我们还有一种其它方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">obj[<span class="string">'name'</span>]</span><br></pre></td></tr></table></figure>
<p>这样我们就可以用for-in操作符来遍历对象了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">"scarlett"</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  sex: <span class="string">"female"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> prop <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(prop + <span class="string">":"</span> + obj[prop]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们for-in循环会按照属性的顺序取出属性名然后赋给prop，for-in循环会把原型里面的属性一起打印出来。</p>
<p>下面我们介绍三种操作符</p>
<p>1.hasOwnProperty</p>
<p>这个操作符的作用是查看当前这个属性是不是对象自身的属性，在原型链上的属性会被过滤掉。如果是自身的，就返回true，否则返回false。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"scarlett"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">  age: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> oPerson = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> prop <span class="keyword">in</span> oPerson) &#123;</span><br><span class="line">  <span class="keyword">if</span>(oPerson.hasOwnProperty(prop)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(oPerson[prop]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样，我们的for-in循环只会打印自身的name属性而不会打印原型上的age属性。</p>
<p>2.in操作符</p>
<p>这个操作符的作用是查看一个属性是不是在这个对象或者它的原型上<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"name"</span> <span class="keyword">in</span> oPerson;<span class="comment">//true</span></span><br><span class="line"><span class="string">"age"</span> <span class="keyword">in</span> oPerson;<span class="comment">//true</span></span><br><span class="line"><span class="string">"sex"</span> <span class="keyword">in</span> oPerson;<span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>
<p>3.instanceof操作符</p>
<p>这个操作符的作用是查看前面的对象是不是后面的构造函数构造出来的<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">oPerson <span class="keyword">instanceof</span> Person;<span class="comment">//true</span></span><br><span class="line">oPerson <span class="keyword">instanceof</span> <span class="built_in">Object</span>;<span class="comment">//true</span></span><br><span class="line">&#123;&#125; <span class="keyword">instanceof</span> <span class="built_in">Object</span>;<span class="comment">//true</span></span><br><span class="line">&#123;&#125; <span class="keyword">instanceof</span> Person;<span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>
<p>也可以理解为：后面的构造器的原型是否在前面对象的原型链上。</p>
<h3 id="包装类"><a href="#包装类" class="headerlink" title="包装类"></a>包装类</h3><p>我们前面提到过，原始值是不可以改变的，只有对象才有属性和方法，那么这个又是什么情况呢？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"abcd"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.length);<span class="comment">//4</span></span><br></pre></td></tr></table></figure>
<p>按理说字符串是原始值，是没有属性的，但是这里确实可以查看length这个属性。</p>
<p>这里就涉及到一个叫做包装类的知识了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str.length</span><br></pre></td></tr></table></figure>
<p>我们在调用执行这一行代码之前，程序会自动把str包装成一个字符串对象，在这一行代码执行完毕之后再销毁这个字符串对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"abcd"</span>;</span><br><span class="line"><span class="comment">//var str1 = new String("abcd");</span></span><br><span class="line">str.length;<span class="comment">//str1.length</span></span><br><span class="line"><span class="comment">//销毁str1</span></span><br></pre></td></tr></table></figure>
<p>这里的str.length的str其实是上一句包装好的str1。str1是对象，上面有属性和方法，然后就可以打印length属性了。在执行完str.length这一行代码后，str1这个对象就被销毁了。</p>
<p>这也就是为什么我们在执行str.length = 2这句话之后，再打印str.length还是4的原因。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"abcd"</span>;</span><br><span class="line"><span class="comment">//var str1 = String("abcd");</span></span><br><span class="line">str.length = <span class="number">2</span>;<span class="comment">//str1.length = 2;</span></span><br><span class="line"><span class="comment">//销毁str1</span></span><br><span class="line"><span class="built_in">console</span>.log(str);<span class="comment">//abcd长度还是4</span></span><br></pre></td></tr></table></figure></p>
<p>其他类型的数据也是一样的，当我们给原始值加属性的时候，都是先隐式包装成对象，然后赋完属性值之后再销毁这个对象。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bool = <span class="literal">true</span>;</span><br><span class="line">bool.len = <span class="number">4</span>;</span><br><span class="line"><span class="built_in">console</span>.log(bool.len);</span><br></pre></td></tr></table></figure></p>
<h3 id="数组的声明"><a href="#数组的声明" class="headerlink" title="数组的声明"></a>数组的声明</h3><p>数组的声明方式一共有两种：</p>
<p>1.字面量方式声明数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br></pre></td></tr></table></figure>
<p>2.通过数组构造函数来声明数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">//1 2 3 4</span></span><br></pre></td></tr></table></figure>
<p>这种方式和字面量方式没有区别，但是要注意的是，如果我们在构造函数里面只写一个数字new Array(5);这个时候这个数字就不是第一个值是5的意思了，而是我们创建一个长度为5的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">//一个长度为10的空数组</span></span><br></pre></td></tr></table></figure>
<h3 id="数组的读写"><a href="#数组的读写" class="headerlink" title="数组的读写"></a>数组的读写</h3><p>js的数组是弱数据类型的数组，不像其他语言那样严格。</p>
<p>溢出读为undefined<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="number">3</span>]);<span class="comment">//undefined</span></span><br></pre></td></tr></table></figure></p>
<p>可以溢出写<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr[<span class="number">5</span>] = <span class="number">5</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">//1,2,,,5</span></span><br></pre></td></tr></table></figure></p>
<h3 id="数组的常用方法"><a href="#数组的常用方法" class="headerlink" title="数组的常用方法"></a>数组的常用方法</h3><p>数组的方法大致可以分类两类：不改变原数组的和改变原数组的。</p>
<p>1.改变原数组的</p>
<p>改变原数组的方法主要有：reverse,sort,push,pop,shift,unshift,splice</p>
<p>• reverse</p>
<p>reverse是使数组倒序。</p>
<p>• push</p>
<p>push是在数组最后的位置增加数据。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.push(<span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure></p>
<p>• pop</p>
<p>pop是从数组后面删除一位数据，同时返回这个被删除的数据，没有参数。</p>
<p>• shift</p>
<p>从数据的最前面删除一位数据，同时返回这个数据，没有参数。</p>
<p>• unshift</p>
<p>在数据的最前面添加数据，和push一样的用法。</p>
<p>• splice</p>
<p>这个方法是截取的意思，它有三个参数，第一个是截取开始的位置，第二个是截取的长度，第三个是参数是一组数据，代表我们要在截取的位置添加的数据。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.splice(<span class="number">1</span>, <span class="number">2</span>, <span class="number">100</span>, <span class="number">188</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">//1 100 188 4 5</span></span><br></pre></td></tr></table></figure>
<p>如果我们不写要添加的数据的话，这个方法就变成了在数组中删除数据了。</p>
<p>如果我们截取的长度是0，然后添加数据的话，这个方法就变成了在数据的特定位置添加数据了。</p>
<p>• sort</p>
<p>这个方法是排序的意思。</p>
<p>它默认按字典序来排序。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr --&gt; 1 2 5 4 3</span><br><span class="line">arr.sort --&gt; 1 2 3 4 5</span><br><span class="line">arr --&gt; a c b d</span><br><span class="line">arr.sort --&gt; a b c d</span><br></pre></td></tr></table></figure></p>
<p>我们还可以自定义排序规则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a.age &lt; b.age;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>这里的a、b代表的是数组里面任意的两位数据。</p>
<p>无论中间的规则怎么写，系统只关注函数最后的返回值是正数还是负数。</p>
<p>负数的时候，表示a在前面，b在后面。</p>
<p>正数的时候，表示a在后面，b在前面。</p>
<p>如果我们这样写，就是乱序排序：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> num = <span class="built_in">Math</span>.random() - <span class="number">0.5</span>;</span><br><span class="line">  <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="不改变原数组的方法"><a href="#不改变原数组的方法" class="headerlink" title="不改变原数组的方法"></a>不改变原数组的方法</h3><p>不改变原数组的方法主要有：</p>
<p>concat,join</p>
<p>• concat</p>
<p>这个方法是连接数组的作用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr1 = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">arr2 = [<span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr = arr1.concat(arr2);</span><br><span class="line"><span class="built_in">console</span>.log(arr, arr1, arr2);<span class="comment">//[1, 2, 2, 3],[1, 2], [2, 3]</span></span><br></pre></td></tr></table></figure>
<p>我们发现arr现在是arr1和arr2连接后的数组，并且arr1和arr2都没有改变。</p>
<p>当然我们如果要连接多个数组的话，那么concat里面的数组之间用逗号分隔即可。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr3 = [<span class="number">5</span>, <span class="number">5</span>];</span><br><span class="line">arr = arr1.concat(arr2, arr3);</span><br></pre></td></tr></table></figure>
<p>• join</p>
<p>这个方法是让数组的每一个数据以什么方式连接成字符串。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>];</span><br><span class="line"><span class="keyword">var</span> str = arr.join(<span class="string">"-"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(str);<span class="comment">//a-b-c</span></span><br></pre></td></tr></table></figure>
<p>我们可以用这个方法来进行大量字符串的连接工作，它比用+运算符连接字符串性能好。</p>
<p>同时，字符串有一个split操作和join操作刚好相反。</p>
<p>split是把字符串以什么方式分割成数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"a-b-c-d"</span>;</span><br><span class="line"><span class="keyword">var</span> arr = str.split(<span class="string">"-"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">//a b c d</span></span><br></pre></td></tr></table></figure>
<h3 id="数组去重问题"><a href="#数组去重问题" class="headerlink" title="数组去重问题"></a>数组去重问题</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> obj = &#123;&#125;,</span><br><span class="line">    arr = [];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, len = <span class="keyword">this</span>.length; i &lt; len; i ++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(!obj[<span class="keyword">this</span>[i]]) &#123;</span><br><span class="line">      obj[<span class="keyword">this</span>[i]] = <span class="literal">true</span>;</span><br><span class="line">      arr.push(<span class="keyword">this</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line">arr = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="literal">undefined</span>, <span class="literal">undefined</span>, <span class="literal">null</span>, <span class="literal">null</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.unique());</span><br></pre></td></tr></table></figure>
<p>这里我们运用了一个简单的哈希结构。当我们数组中的这个数据出现过一次之后，我们就在obj中将这个元素的值的位置标记成true，后面如果出现相同的属性值，因为这个位置已经是true了，就不会添加到新数组里面了，从而达到了去重的效果。</p>
<p>当然我们一般不建议直接改数组的原型，这里仅作演示之用。</p>
<h3 id="ES6的数组方法"><a href="#ES6的数组方法" class="headerlink" title="ES6的数组方法"></a>ES6的数组方法</h3><p>ES6提供了更丰富的数组方法，下面介绍几个经常会用到的</p>
<p>• forEach</p>
<p>这个方法可以改变原数组，它让数组中的元素从头到尾遍历一遍，每一个都调用一下我们在forEach里面传递的方法，中间不会停止。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">  arr[index] += <span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<p>• map</p>
<p>这个方法和forEach很像，只不过map会返回一个新的数组，它也是传递一个指定的方法，让数组中的每一个元素都调用一遍这个方法。不过记得map方法最后有返回值。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> test = arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> item * item;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(test);<span class="comment">// [1, 4, 9]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure></p>
<p>• filter</p>
<p>这个方法是过滤的作用，它返回一个原数组的子集。我们同样会传递一个方法，每一个元素都会调用一下这个方法，但是只有返回true的元素才会被添加到新数组里面，返回false的不会被添加到新数组里面。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> b = a.filter(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> item &gt; <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(b);<span class="comment">// 3 4 5</span></span><br></pre></td></tr></table></figure>
<p>同时，filter()会跳过稀疏数组里面缺少的元素，它的返回数组总是稠密的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,,,,,,,,,,,,,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> b = arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(b);<span class="comment">//1 3 4</span></span><br></pre></td></tr></table></figure>
<p>• every 和 some</p>
<p>这两个方法是数组的迭代方法，他们对数组应用指定函数进行判定，返回true或者false。</p>
<p>every是如果每一个元素经过传递的方法判定之后都返回true，最后才返回true。</p>
<p>some是只要有一个元素返回true，那么就返回true。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.some(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> item &lt; <span class="number">3</span>;</span><br><span class="line">&#125;));<span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.every(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> item &lt; <span class="number">3</span>;</span><br><span class="line">&#125;));<span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p>• reduce 和 reduceRight</p>
<p>reduce()和reduceRight()方法使用指定的函数将数组元素进行组合，最后变成一个值，reduce是从左向右，reduceRight是从右向左。有两个参数，第一个是方法，第二个是可选参数，即我们最后的这个值的初始值。</p>
<p>当我们没有设置初始值的时候，用数组的第一个元素的值作为初始值。不过当数组为空的时候，不带初始值就会报错。</p>
<p>当我们的数组只有一个元素并且没有指定初始值，或者有一个空数组并且指定一个初始值的情况下，reduce只是简单地返回那个值，而不会调用函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> sum = arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(sum);<span class="comment">//0 + 1 + 2 + 3 = 6</span></span><br><span class="line"><span class="keyword">var</span> temp = [<span class="number">1</span>];</span><br><span class="line"><span class="keyword">var</span> temoOut = temp.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x * x * y;</span><br><span class="line">&#125;);<span class="comment">//1,不会调用这个函数，因为数组只有一个值</span></span><br></pre></td></tr></table></figure>
<h3 id="数组类型的检测"><a href="#数组类型的检测" class="headerlink" title="数组类型的检测"></a>数组类型的检测</h3><p>在ES6中，我们有一个isArray()方法来检测是否是数组。</p>
<p>在ES5中，typeof运算符，数组和对象都会返回object，因此无法区分数组和对象。</p>
<p>constructor和instanceof操作符也可以用来判断，但是它们存在潜藏问题：</p>
<p>我们的web浏览器中可能有多个窗口或者窗体，每一个窗体都有自己的js环境，有自己的全局对象。并且，每个全局对象有自己的构造函数，因此一个窗体中的对象将不可能是另外窗体中的构造函数的实例，所以constructor和instanceof都不能真正可靠的检测数组类型。</p>
<p>这个时候我们就需要这样的代码来检测了：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call(arr) === <span class="string">'[object Array]'</span></span><br></pre></td></tr></table></figure></p>
<p>这是ES5中最可靠的检测方法。</p>
<h2 id="预编译"><a href="#预编译" class="headerlink" title="预编译"></a>预编译</h2><p>当我们在后面定义了一个函数，在定义函数之前使用这个函数也是可以的。</p>
<p>我们在后面使用var声明了一个变量，在前面调用这个变量并不会报错而是undefiend。</p>
<p>这两种现象在js中被称为函数声明提升和变量声明提升，函数声明提升是一种整体提升，它会把函数声明和函数体一起提升到前面。变量声明提升是一种局部提升，它仅仅将变量的声明提前了，但是并没有将赋值也一起提前。</p>
<p>它们都是在预编译阶段进行的。</p>
<p>js运行有三个阶段：</p>
<p>1.语法分析</p>
<p>2.预编译</p>
<p>3.解释执行</p>
<p>语法分析：js引擎在解析js代码之前，会先通篇扫描一下，找出低级的语法错误，比如写错大括号之类的。</p>
<p>解释执行：我们前面提到js是一种解释型语言，编译一行执行一行，当语法分析没有问题，并且已经完成预编译之后，就开始解释执行代码了。</p>
<p>这节我们着重介绍预编译</p>
<p>在介绍预编译之前，我们需要掌握两个重要概念。</p>
<p>1.隐示全局变量。</p>
<p>如果变量未经声明就赋值使用，此变量就会变成全局对象window的一个属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.a = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">window</span>.a === a;<span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">window</span>.a === a;</span><br></pre></td></tr></table></figure>
<p>2.一切声明的全局变量，都是window的属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.a);<span class="comment">//123</span></span><br></pre></td></tr></table></figure>
<p>这两种情况有什么区别呢？</p>
<p>经过声明的全局变量不能通过delete操作来删除，但是未经声明的全局变量可以被删除。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="built_in">window</span>.a;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.a);<span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(a);<span class="comment">// Uncaught ReferenceError: a is not defined</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="built_in">window</span>.b;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.b);<span class="comment">// 123</span></span><br><span class="line"><span class="built_in">console</span>.log(b);<span class="comment">// 123</span></span><br></pre></td></tr></table></figure></p>
<p>正是由于这一种特性，导致es5有一种弊端，我们总会在无形中声明一些全局变量。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = b = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这段代码，a经过了声明，但是b却没有声明，b会成为一个全局变量。</p>
<p>了解这两点后，我们开始正式介绍预编译的过程</p>
<p>预编译的过程分为以下四步：</p>
<p>1.创建AO对象(Activation Object)。</p>
<p>2.寻找形参和变量声明，将变量和形参作为AO对象的属性名添加到对象中，值为undefined。值得注意的是，函数声明的函数名不叫变量声明。</p>
<p>3.将实参值和形参值统一。</p>
<p>4.在函数体里面寻找函数声明，将函数名作为属性名，值为这个函数的函数体。</p>
<p>函数在执行前会产生一个上下文，这个上下文就是Activeaction Object对象，简称AO对象。</p>
<p>可以假想成<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AO = &#123;&#125;</span><br></pre></td></tr></table></figure></p>
<p>这个对象是空的，但是里面有一些我们看不到却存在的隐式属性，比如this、arguments等。</p>
<p>这个对象用来存放一些属性和方法，这些属性和方法就按照前面预编译的四步产生的。</p>
<p>接下来我们举个例子：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a); <span class="comment">// ƒ a () &#123;&#125;</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">a</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">  a = <span class="number">222</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(a); <span class="comment">// 222</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">b</span> (<span class="params"></span>) </span>&#123;&#125;; <span class="comment">// ƒ b () &#123;&#125;</span></span><br><span class="line">  <span class="built_in">console</span>.log(b);</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">111</span>;</span><br><span class="line">  <span class="keyword">var</span> a;</span><br><span class="line">&#125;</span><br><span class="line">test(<span class="number">1</span>);</span><br></pre></td></tr></table></figure></p>
<p>我们来按预编译的过程分析一下为什么打印出的是这些值。</p>
<p>首先第一步，创建一个AO对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> AO = &#123;&#125;;</span><br></pre></td></tr></table></figure>
<p>第二步，寻找形参值和变量声明，并且将值赋为undefined</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AO = &#123;</span><br><span class="line">  a: <span class="literal">undefined</span>,</span><br><span class="line">  b: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第三步，将实参值和形参值相统一。属性a被赋值成了1。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AO = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第四步，寻找函数声明，将函数体赋值给属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AO = &#123;</span><br><span class="line">  a: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">  b: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样在解释执行之前，我们预编译阶段创建的AO对象就是这个样子的</p>
<p>这时候我们就可以解释打印出来的值了</p>
<p>第一个console.log a –&gt; function () {}</p>
<p>第二个console.log a –&gt; 222，因为执行了a = 222这一行代码，所以被重新赋值了。</p>
<p>第三个console.log b –&gt; function () {}</p>
<p>var b = function () {}这种不叫做函数声明，这个是函数赋值给b变量，b变量是声明。</p>
<p>例如:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  a<span class="comment">//function</span></span><br><span class="line">  d<span class="comment">//function</span></span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line">  a<span class="comment">//123</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  b<span class="comment">//undefined</span></span><br><span class="line">  <span class="keyword">var</span> b = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  b<span class="comment">//function</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>寻找变量声明的时候，不会管里面的代码到底会不会执行，只管寻找所有变量。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">b</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a)<span class="comment">//undefined</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="number">1</span> &gt; <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(a)<span class="comment">//undefined</span></span><br><span class="line">  <span class="built_in">console</span>.log(b)<span class="comment">//function</span></span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">234</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(b)<span class="comment">//234</span></span><br><span class="line">&#125;</span><br><span class="line">test(<span class="number">2</span>);</span><br></pre></td></tr></table></figure></p>
<p>打印第一个a的时候并不会报错而是undefined，当a没有声明的时候才会报错，这里a是有声明的，if的条件对寻找变量声明没有关系。</p>
<h2 id="原型与原型链"><a href="#原型与原型链" class="headerlink" title="原型与原型链"></a>原型与原型链</h2><h3 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h3><p>原型的定义: 原型是function对象的一个属性，它定义了构造函数制造出来的对象的公共祖先。通过该构造函数产生的对象，可以继承该原型的属性和方法。原型也是对象。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<p>我们先定义一个构造函数，Person.prototype这个属性就是这个构造函数的原型，这个属性是天生就有的，并且这个属性的值也是一个对象。</p>
<p>我们可以在prototype上面添加属性和方法，每一个构造出来的对象都可以继承这些属性和方法。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype.name  = <span class="string">"scarlett"</span>;</span><br><span class="line">Person.prototype.age = <span class="number">17</span>;</span><br><span class="line"><span class="keyword">var</span> oPerson = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="built_in">console</span>.log(oPerson.name);<span class="comment">//scarlett</span></span><br><span class="line"><span class="built_in">console</span>.log(oPerson.age);<span class="comment">//17</span></span><br></pre></td></tr></table></figure></p>
<p>虽然每一个对象都是独立的，但是他们有共同的祖先，当我们访问这个对象的属性的时候，如果它没有这个属性，就会向上找到它的原型，然后在原型上访问这个属性。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.money = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">  money: <span class="number">200</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> oPerson = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="built_in">console</span>.log(oPerson.money);<span class="comment">//100</span></span><br><span class="line"><span class="keyword">delete</span> oPerson.money;</span><br><span class="line"><span class="built_in">console</span>.log(oPerson.money);<span class="comment">//200</span></span><br></pre></td></tr></table></figure></p>
<p>这里我们oPerson对象因为自身有一个money属性，所以就不会到原型上去寻找money属性，因此打印的是100。但是当我们删除了自身的money属性之后，它就会到原型上去寻找money这个属性，因此就打印了200。</p>
<p>利用原型特点，我们可以提取公有属性。</p>
<p>我们可以把每一个对象都有的公有属性提取到原型上，这样当我们用构造函数构造大量的对象的时候就不需要走多次构造函数里面的赋值语句了，每一个对象调用属性的时候直接上原型上查找就可以了。</p>
<h3 id="对象如何查看原型"><a href="#对象如何查看原型" class="headerlink" title="对象如何查看原型"></a>对象如何查看原型</h3><p>前面我们提到了构造函数可以通过.prototype的方法来查看原型，那么我们怎么在对象上查看原型呢？</p>
<p>我们前面提到过用构造函数构造对象时，会隐式创建一个this对象，这个this对象里面有一个默认属性叫做<strong>proto</strong>，这个属性的值就指向这个对象的原型。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">this</span> = &#123;</span><br><span class="line">  <span class="comment">//xxx</span></span><br><span class="line">  __proto__:Person.prototype;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当查找的属性是对象自身没有的属性时，会先查找<code>__proto__</code>这个属性，这个属性指向了原型，所以就可以在原型上继续查找属性了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Person.money.prototype = <span class="number">100</span>;</span><br><span class="line">oPerson.__proro__.money<span class="comment">//100</span></span><br></pre></td></tr></table></figure>
<p>总结一下就是：prototype是构造函数的属性，<strong>proto</strong>是对象的属性，它指向prototype。</p>
<h3 id="对象如何查看自身的构造函数"><a href="#对象如何查看自身的构造函数" class="headerlink" title="对象如何查看自身的构造函数"></a>对象如何查看自身的构造函数</h3><p>在prototype里面，有一个隐式的属性叫做constructor，这个属性记录的就是对象构造函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(oPerson.constructor); <span class="comment">// Person();</span></span><br></pre></td></tr></table></figure>
<h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><p>有了原型，原型还是一个对象，那么这个名为原型的对象自然还有自己的原型，这样原型上还有原型的结构就构成了原型链。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Gra.prototype.firstName = <span class="string">"scarlett"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Gra</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"grandfather"</span>;</span><br><span class="line">  <span class="keyword">this</span>.sex = <span class="string">"male"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> grandfoo = <span class="keyword">new</span> Gra();</span><br><span class="line">grandfoo.word = <span class="string">"hello"</span>;</span><br><span class="line">Foo.prototype = grandfoo;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.age = <span class="number">18</span>;</span><br><span class="line">  <span class="keyword">this</span>.money = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> father = <span class="keyword">new</span> Foo();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"son"</span>;</span><br><span class="line">&#125;</span><br><span class="line">Son.prototype = father;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(son.firstName)<span class="comment">// "scarlett"</span></span><br></pre></td></tr></table></figure>
<p>这种链式结构就叫原型链。</p>
<h3 id="原型链的终点"><a href="#原型链的终点" class="headerlink" title="原型链的终点"></a>原型链的终点</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(Gra.prototype);<span class="comment">// Object&#123;"name": "scarlett"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(Gra.prototype.__proto__);<span class="comment">//Object.prototype</span></span><br><span class="line"><span class="built_in">console</span>.log(Gra.prototype.__proto__.__proto__);<span class="comment">//null</span></span><br></pre></td></tr></table></figure>
<p>从测试中可以看出，其实Gra.prototype上面还有原型，这个原型是Object.prototype，Object.prototype上面就没有原型了（null）。</p>
<p>其实，绝大部分对象最终都继承自Object.prototype这个对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj.__proto__ === <span class="built_in">Object</span>.prototype);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="built_in">console</span>.log(obj.__proto__ === <span class="built_in">Object</span>.prototype);</span><br></pre></td></tr></table></figure>
<p>我们没有自定义原型的对象，它的原型就是Object.prototype。</p>
<p>由此可见，原型链的终点一般是Object.prototype;</p>
<p>但是并不是所有的对象都有原型。</p>
<p>我们可以使用Object.create方法创造没有原型的对象。</p>
<p>Object.create()方法需要写一个参数，这个参数传入的就是这个对象的原型。</p>
<p>如果我们想要构造和var obj = {}一样的对象，就可以这么写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.prototype);</span><br></pre></td></tr></table></figure>
<p>我们也可以写一个自定义对象，让它成为原型。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(&#123; <span class="attr">name</span>: <span class="string">"scarett"</span> &#125;);</span><br><span class="line"><span class="built_in">console</span>.log(obj.name);<span class="comment">//scarlett</span></span><br></pre></td></tr></table></figure>
<p>当我们写参数为null的时候，我们就构造出来了一个没有原型的对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj.__proto__);<span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<h3 id="原型链上属性的增删改查"><a href="#原型链上属性的增删改查" class="headerlink" title="原型链上属性的增删改查"></a>原型链上属性的增删改查</h3><p>1.新增</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype.a = <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>或者<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">person.__proto__.b = <span class="number">2</span></span><br></pre></td></tr></table></figure></p>
<p>2.删除</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype.name = <span class="string">"father"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"son"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">delete</span> person.name;</span><br><span class="line"><span class="built_in">console</span>.log(person.name);<span class="comment">//father</span></span><br></pre></td></tr></table></figure>
<p>这个时候person对象上面没有name属性了，我们再次删除这个属性是不是就可以删除原型上的属性了呢？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> person.name;</span><br><span class="line"><span class="built_in">console</span>.log(person.name);<span class="comment">//father</span></span><br></pre></td></tr></table></figure>
<p>实际并没有，由此可见，对象并不能删除原型上的属性。</p>
<p>只有这样才能删除</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> person.__proto__.name</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> Person.prototype.name</span><br></pre></td></tr></table></figure>
<p>3.修改</p>
<p>如果对象的属性只要原型上有，当我们通过一个对象改变了原型上属性的值时，所有对象的这个属性的值也会随之更改。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Person.prototype.arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person();</span><br><span class="line">person1.arr.push(<span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person2.arr);<span class="comment">//[1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Person.prototype.name = <span class="string">'init'</span>;</span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="built_in">console</span>.log(person2.name);<span class="comment">//init</span></span><br><span class="line">Person.prototype.name = <span class="string">'person1'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(person2.name);<span class="comment">//person1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Person.prototype.name = <span class="string">'init'</span>;</span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="built_in">console</span>.log(person2.name);<span class="comment">//init</span></span><br><span class="line">person1.__proto__.name = <span class="string">'person1'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(person2.name);<span class="comment">//person1</span></span><br></pre></td></tr></table></figure>
<p>4.查找</p>
<p>查找我们前面已经介绍过很多了。</p>
<p>最后，我们看个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype.name = <span class="string">"scarlett"</span>;</span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"son"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> oPerson = <span class="keyword">new</span> Person();</span><br><span class="line">oPerson.sayName();<span class="comment">//son</span></span><br></pre></td></tr></table></figure>
<p>有一点我们需要记住，谁调用这个方法，这个方法中的this就指向这个调用它的对象，所以打印的是son。</p>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><h3 id="1-传统形式"><a href="#1-传统形式" class="headerlink" title="1.传统形式"></a>1.传统形式</h3><p>这个阶段使用的继承方式是我们前面介绍的原型链继承。</p>
<p>但是这种继承有一个缺点就是它会继承过多没有用的属性。</p>
<h3 id="2-借用构造函数"><a href="#2-借用构造函数" class="headerlink" title="2.借用构造函数"></a>2.借用构造函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  Foo.call(<span class="keyword">this</span>, name, age);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son(<span class="string">"son"</span>, <span class="number">123</span>);</span><br><span class="line"><span class="built_in">console</span>.log(son.name);<span class="comment">//son</span></span><br></pre></td></tr></table></figure>
<p>这种方式就是利用了call和apply可以改变this指向的特点，通过构造函数来间接地构造子对象。</p>
<p>但是这种方式有两个缺点：</p>
<p>1.严格来说，这种方式不属于继承，也访问不了原型的原型。</p>
<p>2.每次构造一个对象都要走两个构造函数，效率很低。</p>
<h3 id="3-共享原型。"><a href="#3-共享原型。" class="headerlink" title="3.共享原型。"></a>3.共享原型。</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Son.prototype = Foo.prototype;</span><br></pre></td></tr></table></figure>
<p>这种方式就是让父子构造函数的原型都一样，虽然这种方法可以让子构造函数访问原型链，也不用走两个构造函数了，但是缺点也很明显：改变了子类的原型，父类原型也会改变，因为它们是同一个。</p>
<h3 id="4-圣杯模式"><a href="#4-圣杯模式" class="headerlink" title="4.圣杯模式"></a>4.圣杯模式</h3><p>这个阶段也是最终阶段，也是我们目前使用的方式。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">C, P</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  F.prototype = P.prototype;</span><br><span class="line">  C.prototype = <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里我们利用了一个中间函数F来连接P和C的原型，这样我们改变C的原型的时候只会影响F而不会影响P。</p>
<p>但是这里还存在一个问题，当我们想查看Child构造出来的对象的构造函数的时候，它打印是Parent函数。</p>
<p>所以我们还需要记录子类的构造函数。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C.prototype.constructor = C;</span><br></pre></td></tr></table></figure></p>
<p>最终的形式就变成了这个样子：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">C, P</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">  F.prototype = P.prototype;</span><br><span class="line">  C.prototype = <span class="keyword">new</span> F();</span><br><span class="line">  C.prototype.constructor = C;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="函数与闭包"><a href="#函数与闭包" class="headerlink" title="函数与闭包"></a>函数与闭包</h2><p>函数声明方式有两种：</p>
<p>1.function demo () {} 函数声明</p>
<p>2.var demo = function () {} 函数表达式</p>
<p>3.var demo = function xxx() {} 命名函数表达式</p>
<p>其实第2种和第3种相比较，第2种叫做匿名函数表达式，我们平时使用第1种和第2种居多，很少使用第3种。</p>
<p>因此第2种我们就简称为函数表达式了（第三种的xxx无法引用函数）。</p>
<p>每一个函数的AO对象里都有一个类数组属性arguments，这个属性里面存的就是实参。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]);<span class="comment">// 1</span></span><br><span class="line">&#125;</span><br><span class="line">func(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p>
<p>arguments[0]就可以查看我们传递的第一个实参了。</p>
<p>函数有一个length属性，这个length储存的是实参的数量。</p>
<p>每一个函数都会有一个return，如果不写的话函数也会自动加上一个return;</p>
<p>return的功能有两个：</p>
<p>1.返回这个函数的执行结果。</p>
<p>2.终止函数的执行。</p>
<h3 id="arguments-callee和function-caller"><a href="#arguments-callee和function-caller" class="headerlink" title="arguments.callee和function.caller"></a>arguments.callee和function.caller</h3><p>arguments.callee指代函数本身。</p>
<p>当我们在一些匿名函数或者立即执行函数里面进行递归调用函数本身的时候，由于这个函数没有名字，我们不能用函数名的方式调用，就可以用arguments.callee来调用。</p>
<p>function.caller，这是函数本身自带的一个属性，可以指出当前函运行环境的函数引用，即这个函数是在哪个函数体里面执行的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(test.caller);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  test()</span><br><span class="line">&#125;</span><br><span class="line">demo();<span class="comment">//function demo()&#123;&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><p>定义：变量（变量作用域又称为上下文）和函数生效（能被访问）的区域。</p>
<p>javascript的函数，是可以产生作用域的！</p>
<p>es5中的作用域大概只有全局作用域和函数作用域两种，es6中新添加了块级作用域。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> demo = <span class="number">123</span>;<span class="comment">//全局变量</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> demo = <span class="number">234</span>;<span class="comment">//局部变量</span></span><br><span class="line">  <span class="built_in">console</span>.log(demo);</span><br><span class="line">&#125;</span><br><span class="line">test();<span class="comment">//234</span></span><br><span class="line"><span class="built_in">console</span>.log(demo1);<span class="comment">//报错</span></span><br></pre></td></tr></table></figure>
<p>如果在函数作用域里面声明变量没有用var的话，那么就声明了一个全局变量。</p>
<p>两个不同作用域（除了全局作用域）之间是不能互相访问的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> str1 = <span class="string">"abc"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(str1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">demo2();<span class="comment">//报错</span></span><br></pre></td></tr></table></figure>
<h3 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h3><p>既然函数存在函数作用域，函数又可以嵌套，那么作用域之间自然就会产生嵌套关系，这个时候就产生了作用域链。</p>
<p>当代码在一个环境中执行时，会创建变量对象的一个作用域链（scope chain）来保证执行环境变量、函数的有权访问和有序访问。</p>
<p>作用域链的顶层对象始终是当前执行代码所在环境的变量对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> demo_a = <span class="number">1</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> demo_a = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(demo_a);</span><br><span class="line">  &#125;</span><br><span class="line">  test();</span><br><span class="line">&#125;</span><br><span class="line">demo();</span><br></pre></td></tr></table></figure>
<p>在这个例子中，demo运行的时候，首先创建了一个demo的作用域，但是window本身还有一个全局作用域，这就让demo产生了一个作用域链。本着对执行环境的有权和有序访问，每个函数自身的作用域总是在作用域链的最顶层，下一层是这个函数的父级函数的作用域，再下面是父级的父级作用域，直到全局作用域。因此这个例子打印的值是2.</p>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>什么是闭包？</p>
<p>闭包是能够读取其他函数内部变量的函数</p>
<p>不同作用域之间是不能够互相访问的，但是我们如果在一个函数内部再定义一个函数，并且这个内部函数与外部函数的变量有关联，那么我们就可以通过返回这个内部函数，然后来访问外部函数里面的变量。</p>
<p>闭包是将函数内部和函数外部连接起来的一座桥梁。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> demo = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    add: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      demo ++;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">get</span>: function() &#123;</span><br><span class="line">      <span class="keyword">return</span> demo;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = func();</span><br><span class="line">obj.add();</span><br><span class="line">obj.add();</span><br><span class="line"><span class="built_in">console</span>.log(obj.get())<span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<p>当函数执行完之后，函数的执行上下文就会被销毁，我们自然就无法访问里面的变量了。但是我们这个函数返回了一个依赖于这个函数的新函数，也就是说这个没有被销毁的新函数的作用域链中还存在着对原本函数的作用域的引用，就导致我们原本的函数的上下文不会被销毁，我们称返回的这个新函数是原本函数的闭包函数。</p>
<p>在上面的例子中，func函数内部有一个局部变量demo，我们把这个函数的返回值赋值给了一个全局变量obj，但是由于这个返回值中有新函数依赖于本来的func函数，这就导致func函数的上下文不会被销毁。</p>
<p>这里我们一共运行了两次obj.add()，最后打印出来的值是3，说明func函数的a变量在函数执行完之后并没有被销毁而是存到了内存中。</p>
<p>这个里的add函数相当于一个setter累加器，可以在函数外部对函数内部的变量进行操作。</p>
<p>闭包会使得函数中的变量被保存在内存中，所以也不能滥用闭包。</p>
<h2 id="立即执行函数"><a href="#立即执行函数" class="headerlink" title="立即执行函数"></a>立即执行函数</h2><p>立即执行函数是处理闭包的一个重要方法。但是注意闭包是没有办法解除的，我们只是通过另一个新闭包来消除上一个闭包的影响。</p>
<p>定义：立即执行函数不需要被定义，直接执行，执行完毕之后直接释放。</p>
<p>经常被用作初始化。</p>
<p>1.(function (a) {})(num);</p>
<p>2.(function (a) {} (num));</p>
<p>传递的形参是a，a的实参值是num，num是我们在外面定义的变量。</p>
<p>这两种写法功能完全一样，但是标准一点的写法是第二种。</p>
<p>函数声明不能被执行，但是函数表达式可以。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;&#125; ();<span class="comment">//错误</span></span><br><span class="line"><span class="keyword">var</span> test = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125; ();<span class="comment">//表达式也可以写成立即执行函数的形式。</span></span><br></pre></td></tr></table></figure>
<p>第一种加一个括号变成立即执行函数就可以执行了。</p>
<p>使用立即执行函数处理闭包。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">returnB</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i ++) &#123;</span><br><span class="line">    arr[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> save = returnB();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i ++) &#123;</span><br><span class="line">  save[i]();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>最后会输出10个10，并不是我们想要的0-9。</p>
<p>这是因为我们打印i的这一行代码所在的函数的自身作用域中不存在i这个变量，而在它的父级函数returnB中才有i这个变量，而arr[0]-arr[9]这10个值都是闭包函数，当for循环执行完i变成10之后，我们后面依次触发每一个save[i]（arr[0]-arr[9]）函数的时候，函数寻找的i是父级函数returnB作用域中的i，而这个作用域中的i此时已经变成10了。</p>
<p>那么如何更改可以让它输出0-9呢？这里就需要利用立即执行函数来产生新的闭包以消除我们共用一个闭包值导致的问题了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">returnB</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = [];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i ++) &#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">      arr[n] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(n);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;(i));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> save = returnB();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; save.length; i ++) &#123;</span><br><span class="line">  save[i]()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>立即执行函数执行之后，会产生一个新的作用域，我们把i的具体的0-9这10个数分别作为参数传进去，也就是说每一个作用域里面的的n都是不一样的，所以可以正常打印出0-9。</p>
<h2 id="call-apply"><a href="#call-apply" class="headerlink" title="call/apply"></a>call/apply</h2><p>使用call/apply可以改变this指向。call/apply的区别是传参形式不同。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"scarlett"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">person();<span class="comment">//window</span></span><br></pre></td></tr></table></figure></p>
<p>此时this打印的是window。</p>
<p>我们尝试使用一下call<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">person.call(obj);<span class="comment">//&#123;name: "scarlett"&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>当使用了call方法之后，person函数内部的this就指向了我们传递的obj对象了。</p>
<p>还需要传参数的话，我们只要把实参值写在call后面并用逗号间隔开就可以了。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">person.call(obj, <span class="string">"scarlett"</span>, <span class="number">18</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj.name);<span class="comment">//scarlett</span></span><br></pre></td></tr></table></figure></p>
<p>apply和call基本没有区别，唯一的区别是call后面的参数是一个一个传的，而apply后面的参数是放在一个数组里然后传进去的。</p>
<p>还是上面那个例子，如果用apply来传递实参的话，将是下面这种形式。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">person.apply(obj, [<span class="string">"scarett"</span>, <span class="number">17</span>]);</span><br></pre></td></tr></table></figure></p>
<h2 id="this指向"><a href="#this指向" class="headerlink" title="this指向"></a>this指向</h2><p>js中this指向只需要记住这4点</p>
<p>1.预编译过程中 this–&gt;window</p>
<p>2.全局作用域里面 this–&gt;window</p>
<p>3.call/apply可以改变this指向</p>
<p>4.obj.func() func()里面的this指向obj</p>
<p>我们举几个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  height: <span class="number">190</span>,</span><br><span class="line">  eat: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.height++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.eat();<span class="comment">//this指向obj,谁调用的this,this就指向谁。</span></span><br><span class="line">eat.call(obj);<span class="comment">//this指向obj</span></span><br></pre></td></tr></table></figure>
<p>理解了下面这段代码，你就基本能掌握this指向。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"222"</span>;</span><br><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  name: <span class="string">"111"</span>,</span><br><span class="line">  say: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fun = a.say;</span><br><span class="line">fun();<span class="comment">//222</span></span><br><span class="line">a.say();<span class="comment">//111</span></span><br><span class="line"><span class="keyword">var</span> b = &#123;</span><br><span class="line">  name: <span class="string">"333"</span>,</span><br><span class="line">  say: <span class="function"><span class="keyword">function</span>(<span class="params">fun</span>) </span>&#123;</span><br><span class="line">    fun();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">b.say(a.say);<span class="comment">//222</span></span><br><span class="line">b.say = a.say;</span><br><span class="line">b.say();<span class="comment">//333</span></span><br></pre></td></tr></table></figure></p>
<p>第一处打印调用fun()，这里其实就是把a.say这个函数的函数体赋给了fun这个函数，相当于在全局空间下写了一个func函数，里面的代码就是a.say里面的代码，所以this指向window，因此打印222。</p>
<p>第二处打印调用了a.say()，按照我们前面说的谁调用函数，函数里面的this就指向谁，因此这里的this指向a，所以打印111。</p>
<p>第三处比较复杂，它调用了b.say(a.say))。这里其实是把a.say这个函数体替换了原本b中fun的位置，我们在调用b.say()这个方法的时候，里面的this是指向b的，但是这个this并不在fun里面而是在say里面,fun里面的this是在预编译阶段指向window的，因此打印222。</p>
<p>第四个b.say = a.say，其实和第二种是一模一样的意思，因此打印333。</p>
<h2 id="克隆"><a href="#克隆" class="headerlink" title="克隆"></a>克隆</h2><h3 id="克隆的概念"><a href="#克隆的概念" class="headerlink" title="克隆的概念"></a>克隆的概念</h3><p>克隆和我们前面所讲的继承有一些区别，克隆是复制出来一个一模一样的目标对象，克隆分为浅层克隆和深层克隆。</p>
<h3 id="浅层克隆"><a href="#浅层克隆" class="headerlink" title="浅层克隆"></a>浅层克隆</h3><p>大致就是我们的源对象里面有什么属性，目标对象就有什么属性：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">src, tar</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> tar = tar || &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> prop <span class="keyword">in</span> src) &#123;</span><br><span class="line">    <span class="keyword">if</span>(src.hasOwnProperty(prop)) &#123;</span><br><span class="line">      tar[prop] = src[prop];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> tar;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当我们有一个属性值是引用值（数组或者对象）的时候，按照这种克隆方式，如果改变了源对象或者目标对象的引用值属性值，另一个也会跟着改变，这一点就是浅层克隆的缺点。</p>
<h3 id="深层克隆"><a href="#深层克隆" class="headerlink" title="深层克隆"></a>深层克隆</h3><p>深层克隆的原理很简单，我们只要不克隆引用值的引用，而是把引用值也当做一个源对象，把里面的值一个一个克隆进目标对象里面就可以了。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">src, tar</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> tar = tar || &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> prop <span class="keyword">in</span> src) &#123;</span><br><span class="line">    <span class="keyword">if</span> (src.hasOwnProperty(prop)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span>(src[prop]) === <span class="string">"object"</span>) &#123;</span><br><span class="line">        tar[prop] = (src[prop] <span class="keyword">instanceof</span> <span class="built_in">Array</span>) ? [] : &#123;&#125;;</span><br><span class="line">        deepClone(src[prop], tar[prop]);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        tar[prop] = src[prop];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> tar;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> src = &#123;</span><br><span class="line">  a: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  b: &#123;</span><br><span class="line">    age: <span class="string">"18"</span>,</span><br><span class="line">    sex: <span class="string">"male"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> tar = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> tar1 = deepClone(src, tar);</span><br><span class="line">src.a.push(<span class="number">4</span>);</span><br><span class="line">src.b.name = <span class="string">"jiang"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(src);</span><br><span class="line"><span class="built_in">console</span>.log(tar1)</span><br></pre></td></tr></table></figure></p>
<p>这里我们运用了递归调用的方法，当我们检测到源对象里面的这个属性值是引用类型，那么就在目标对象里面也创建一个引用类型的属性。如果原来是数组就创建数组，是对象就创建对象，然后分别将源对象里面的这个引用值和目标对象里面的引用值分别当做新的源对象和目标对象进行克隆，这样就是克隆的里面每一个值了，而不是把整个引用都克隆过去。</p>
<h2 id="类数组"><a href="#类数组" class="headerlink" title="类数组"></a>类数组</h2><p>我们知道有两种数据叫做数组和对象，但是我们其实可以用对象来模拟出数组的效果，我们把这种对象叫做类数组。</p>
<p>我们前面提到的arguments实参列表就是一个类数组。</p>
<p>类数组并不是一个数组，但是它可以表现出数组的特性。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrObj = &#123;</span><br><span class="line">  <span class="string">"0"</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">"1"</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="string">"2"</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="string">"length"</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="string">"push"</span>: <span class="built_in">Array</span>.prototype.push</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">arrObj.push(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arrObj);<span class="comment">//&#123;0: 1, 1: 2, 2: 3, 3: 4, length: 4&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>这样我们就创造了一个类数组，它表现了出数组的特性。</p>
<p>我们会发现它自动改变了length值，这就非常神奇了。</p>
<p>其实这个类数组的关键就在这个length属性上，如果没有length属性，那么就是一个普通的对象，即使有push方法也不能使用。</p>
<p>我们来模拟一下数组的push方法的实现：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.push = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>[<span class="keyword">this</span>.length++] = num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="try…catch"><a href="#try…catch" class="headerlink" title="try…catch"></a>try…catch</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一般是用来检测可能出错的代码的。</p>
<p>我们把可能出错的代码块放入try里面，然后把如果出错后的处理代码放到catch里面，finally就是最后都会走的代码。</p>
<p>catch的参数e一定要写上，系统会自动将错误信息传进去，错误信息一般有6种：</p>
<p>1.EvalError eval()，使用与定义不一致<br>2.RangeError，数值越界<br>3.ReferenceError，非法或不能识别的引用数值<br>4.SyntaxError，发生语法解析错误<br>5.TypeError，操作数类型错误<br>6.URIError，URI处理函数使用不当</p>
<p>其中3和4比较常见。</p>
<p>当try里面的代码出错了，try里面出错代码后面的代码就不会执行了，但是在try外面的代码还是正常执行的。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;<span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(e);<span class="comment">// ReferenceError: a is not defined</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>);<span class="comment">// 1</span></span><br></pre></td></tr></table></figure></p>
<h2 id="with"><a href="#with" class="headerlink" title="with"></a>with</h2><p>with () {}的作用是改变作用域链，它可以把括号里面的执行期上下文或者作用域放在自己的作用域链的最顶端。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="number">123</span> &#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">111</span>;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">222</span>;</span><br><span class="line">  <span class="keyword">with</span>(obj) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);<span class="comment">// 123</span></span><br><span class="line">    <span class="built_in">console</span>.log(b);<span class="comment">// 222</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">test();</span><br></pre></td></tr></table></figure></p>
<p>如果没有with，在test函数里面作用域链的最顶端应该是自身，但是使用with之后，我们把obj放在了作用域链的最顶端。</p>
<p>with改变作用域链，很影响性能，一般不建议使用。</p>
<h2 id="ES5严格模式"><a href="#ES5严格模式" class="headerlink" title="ES5严格模式"></a>ES5严格模式</h2><p>es5的严格模式是一种全新的es5规范，在这个模式下，有一些es3的不标准的规则就不能使用了。</p>
<p>我们只要在代码的第一行写上”use strict;”这一行字符串就可以进入严格模式了，不会对不兼容严格模式的浏览器产生影响。</p>
<p>严格模式还可以分为：</p>
<p>1.全局严格模式</p>
<p>2.局部严格模式</p>
<p>全局模式就是我们在整个js代码的第一行写上字符串，而局部模式就是在函数里面的第一行写上字符串。</p>
<p>使用严格模式可以强制使我们的代码避免使用一些不推荐的语法，例如：</p>
<p>1.不允许使用with函数、arguments.callee方法、func.caller属性。</p>
<p>2.变量赋值之前必须声明。</p>
<p>3.局部的this使用前必须被赋值，除了全局的this默认指向window，其他的默认都是undefiend。而且在非严格模式下，Person.call(null/undefined)之后，里面的this还是指向window。但是如果是严格模式的话，那么传递null，this就指向null，传递undefiend，this就指向undefiend。</p>
<p>4.拒绝重复属性和参数。不过有一些浏览器的属性名可以重复。</p>
<p>…</p>
<p>》》》》》》》》》》》》》》》》》</p>
<h1 id="react"><a href="#react" class="headerlink" title="react"></a>react</h1><p>React起源于Facebook内部项目，于2013年5月开源。</p>
<h2 id="react的几个重要特点"><a href="#react的几个重要特点" class="headerlink" title="react的几个重要特点"></a>react的几个重要特点</h2><p>1.虚拟DOM</p>
<p>传统web页面一般是直接操作DOM的，但是DOM操作是很耗性能的。react引入了虚拟DOM的概念，在需要更新DOM时，利用diff算法计算出虚拟DOM的最小更新操作，然后再进行更新，因此具有很好的性能。</p>
<p>由于DOM章节我们还没有学，这里你只需要把它理解为是html里的标签（如div、a等）。</p>
<p>2.组件化</p>
<p>整个页面是由一个个组件组合而成的，从而可以很方便地实现功能单元的解耦和复用。</p>
<p>3.单向数据流</p>
<p>数据是由外层组件向内层组件单向进行传递和更新的，所以让组件之间的关系变得简单、可预测。</p>
<h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><p>本章所有示例的源码都可以在<a href="https://github.com/mfaying/react-demos" target="_blank" rel="noopener">react-demos</a>中查看、调试。</p>
<p>它只需要将仓库克隆下来，在根目录下先执行cnpm install安装依赖包，再执行npm run start即可调试。</p>
<p>执行npm、cnpm命令需要安装node.js环境</p>
<p>node.js安装非常简单，去<a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">官网首页</a>下载长期支持版安装最新版本即可。</p>
<p>不过我们推荐大家安装课前概览中所介绍的<a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener">nvm</a>(Node Version Manager，它可以自由切换node.js版本)。</p>
<p>安装完node.js后，你就可以使用它自带的包管理npm了。</p>
<p>直接用npm下载依赖包非常耗时（因为连接的是国外的服务器），所以建议你切换到<a href="https://developer.aliyun.com/mirror/NPM?from=tnpm" target="_blank" rel="noopener">淘宝 NPM 镜像</a>，执行<code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code>，这样你就可以使用cnpm命令安装依赖包了。</p>
<h2 id="简易工程搭建"><a href="#简易工程搭建" class="headerlink" title="简易工程搭建"></a>简易工程搭建</h2><p>环境搭建好后，接下来让我们看看react-demos简易工程是怎么搭建的。</p>
<p>首先新建一个空文件夹，我们命名为react-demos</p>
<p>以该文件夹为根目录执行<code>npm init</code>，一路回车即可。</p>
<p>再执行依赖包安装命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cnpm install babel-preset-react@6.24.1 babel-core@6.26.3 babel-loader@7.1.5 babel-preset-env@1.7.0 babel-preset-stage-2@^6.24.1 web-webpack-plugin@4.6.7 webpack@4.44.1 webpack-cli@3.3.12 webpack-dev-server@3.11.0 --save-dev</span><br><span class="line"></span><br><span class="line">cnpm install react@16.13.1 react-dom@16.13.1 --save</span><br></pre></td></tr></table></figure>
<p>创建一个webpack.config.js文件，内容如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; WebPlugin &#125; = <span class="built_in">require</span>(<span class="string">"web-webpack-plugin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">"development"</span>,</span><br><span class="line">  entry: &#123;</span><br><span class="line">    <span class="comment">// 修改入口文件即可调试不同文件下的代码</span></span><br><span class="line">    app: <span class="string">"./src/01/index.js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">"dist"</span>),</span><br><span class="line">    filename: <span class="string">"[name]_[contenthash:8].js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    open: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.jsx?$/</span>,</span><br><span class="line">        include: [path.resolve(__dirname, <span class="string">"src"</span>)],</span><br><span class="line">        loader: <span class="string">"babel-loader"</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          presets: [<span class="string">"react"</span>, <span class="string">"es2015"</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> WebPlugin(&#123;</span><br><span class="line">      template: <span class="string">"./src/index.html"</span>,</span><br><span class="line">      filename: <span class="string">"index.html"</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>关于webpack的配置我们会在后面章节中介绍，这里大家拷贝内容即可。</p>
<h2 id="编写你的第一个react页面"><a href="#编写你的第一个react页面" class="headerlink" title="编写你的第一个react页面"></a>编写你的第一个react页面</h2><p>工程也搭建完毕了，接下来我们就可以编写react代码了。</p>
<p>我们创建代码目录结构如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">  01</span><br><span class="line">    index.jsx</span><br><span class="line">  02</span><br><span class="line">    index.jsx</span><br><span class="line">  03</span><br><span class="line">    index.jsx</span><br><span class="line">  ...</span><br><span class="line">  index.html</span><br></pre></td></tr></table></figure></p>
<p>我们主要在index.jsx文件中编写代码。01、02、03…目录是为了方便管理本章不同知识点的示例代码，这样你就可以通过修改webpack.config.js的入口文件地址来切换各个示例代码了。</p>
<p>其中，index.html文件我们不会去改动它，它的内容如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>react demos<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>接下来在index.jsx文件中编写react代码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入所需模块</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编写一个组件</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">// const和var类似，它是ES6中的变量命名关键字，它命名的是一个常量。</span></span><br><span class="line">    <span class="keyword">const</span> text = <span class="string">'test'</span></span><br><span class="line">    <span class="comment">// jsx语法</span></span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将组件渲染到页面中</span></span><br><span class="line">ReactDom.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br></pre></td></tr></table></figure>
<p><code>class App extends Component</code>是react编写组件的方式，我们的页面就是由一个个组件组成的。</p>
<p>直接在JavaScript语言写html的语法叫JSX，它的基本语法规则是：遇到HTML标签（以 &lt; 开头），就用HTML规则解析；遇到代码块（以 { 开头），就用JavaScript规则解析。</p>
<p>ReactDom.render可以将组件实例（<code>&lt;App /&gt;</code>）转为HTML，并渲染到指定的DOM节点中。</p>
<p>此时我们在根目录下执行<code>npm run start</code>，就可以看到浏览器自动打开我们第一个react页面，页面中出现了test。</p>
<h2 id="行间样式和className"><a href="#行间样式和className" class="headerlink" title="行间样式和className"></a>行间样式和className</h2><p>react中元素的style属性可以添加行间样式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> style = &#123;</span><br><span class="line">      color: <span class="string">"red"</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;span className=<span class="string">"text"</span> style=&#123;style&#125;&gt;</span><br><span class="line">        test</span><br><span class="line">      &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDom.render(&lt;App /</span>&gt;, <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br></pre></td></tr></table></figure>
<p>在开发中我们一般是为元素设置类名（由于class是保留字，需要使用className设置类名），然后在单独的样式文件中通过css的class选择器为元素添加样式，而非采用style属性，这样可以实现样式文件的解耦。</p>
<h2 id="this-props"><a href="#this-props" class="headerlink" title="this.props"></a>this.props</h2><p>在组件中，通过this.props属性可以获取向组件传递的参数，props改变会触发组件重新渲染（执行render函数）。</p>
<p>原生的数组map方法可以渲染列表，需要为列表中每一个子项添加一个唯一标识（react性能优化需要），否则会抛<code>Warning: Each child in a list should have a unique &quot;key&quot; prop.</code>警告。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; arr &#125; = <span class="keyword">this</span>.props;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &#123;arr.map(<span class="function"><span class="params">item</span> =&gt;</span> (</span><br><span class="line">          &lt;li key=&#123;item&#125;&gt;&#123;item&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">        ))&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/u</span>l&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">ReactDom.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> <span class="attr">arr</span>=<span class="string">&#123;arr&#125;</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br></pre></td></tr></table></figure>
<p>此时页面中渲染出了1、2、3。</p>
<h2 id="this-state"><a href="#this-state" class="headerlink" title="this.state"></a>this.state</h2><p>state是组件的内部状态，react将组件看成是一个状态机。通过调用this.setState方法可以改变state，state的改变会触发组件重新渲染（执行render函数）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      value: <span class="string">""</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.ref = React.createRef();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onChange = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      value: <span class="keyword">this</span>.ref.current.value</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; value &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;input ref=&#123;<span class="keyword">this</span>.ref&#125; onChange=&#123;<span class="keyword">this</span>.onChange&#125;&gt;&lt;<span class="regexp">/input&gt;</span></span><br><span class="line"><span class="regexp">        &lt;span&gt;&#123;value&#125;&lt;/</span>span&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDom.render(&lt;App /</span>&gt;, <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br></pre></td></tr></table></figure>
<p>组件中标签并不是真实的DOM节点，而是虚拟DOM（virtual DOM）。只有当它插入html文档后，才会变成真实的DOM。</p>
<p>这个例子我们还附带演示了如何从组件获取真实的DOM节点，也就是refs转发的使用方式。</p>
<h2 id="组件生命周期"><a href="#组件生命周期" class="headerlink" title="组件生命周期"></a>组件生命周期</h2><p><img src="https://wx-store.oss-cn-beijing.aliyuncs.com/c561beaa640.jpeg" alt="组件生命周期"></p>
<p>组件是个状态机，它的生命周期分成三大阶段：</p>
<h3 id="1-Mounting（装载组件，上侧虚线框）"><a href="#1-Mounting（装载组件，上侧虚线框）" class="headerlink" title="1.Mounting（装载组件，上侧虚线框）"></a>1.Mounting（装载组件，上侧虚线框）</h3><p>依次会经历：</p>
<p>getDefaultProps 初始化props</p>
<p>getInitialState 初始化state</p>
<p>componentWillMount 将要装载</p>
<p>render 渲染</p>
<p>componentDidMount 装载完毕，此时可以获取到更新后的DOM，AJAX请求也在这个生命周期调用</p>
<h3 id="2-Updating（正在更新，左下角虚线框）"><a href="#2-Updating（正在更新，左下角虚线框）" class="headerlink" title="2.Updating（正在更新，左下角虚线框）"></a>2.Updating（正在更新，左下角虚线框）</h3><p>组件装载完毕后，就处于运行阶段了。</p>
<p>当state或props改变，组件就会更新，重新渲染（执行render函数）。</p>
<p>此时会走下面的生命周期：</p>
<p>shouldComponentUpdate(nextProps, nextState) 返回一个boolean值，用于判断是否重新渲染，默认是true。</p>
<p>componentWillUpdate(nextProps, nextState) 将要render</p>
<p>render</p>
<p>componentDidUpdate(prevProps, prevState) render完成，此时能取到更新后的DOM。</p>
<p>我们可以注意到props改变时，会多走一个生命周期函数：</p>
<p>componentWillReceiveProps(nextProps) 将要接收新的props，这里你可以拿到nextProps的值（最终的props值）</p>
<h3 id="3-Unmounting（卸载，右下角虚线框）"><a href="#3-Unmounting（卸载，右下角虚线框）" class="headerlink" title="3.Unmounting（卸载，右下角虚线框）"></a>3.Unmounting（卸载，右下角虚线框）</h3><p>componentWillUnmount 组件将要卸载，这里一般会做一些清除操作，如清除定时器等。</p>
<p>在代码中你可以打印一下生命周期看看</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    value: <span class="string">""</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillMount() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"componentWillMount"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"componentDidMount"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"render"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDom.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br></pre></td></tr></table></figure>
<p>控制台中会依次打印出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">componentWillMount</span><br><span class="line">render</span><br><span class="line">componentDidMount</span><br></pre></td></tr></table></figure>
<h2 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h2><p>组件的数据来源，通常是通过Ajax请求从服务器获取的，我们一般在componentDidMount生命周期方法中调用Ajax请求，等到请求成功，再用this.setState方法将数据保存到组件的state中，同时state改变会触发UI重新渲染，页面展示出数据。</p>
<h2 id="子组件向父组件传递数据（通信）"><a href="#子组件向父组件传递数据（通信）" class="headerlink" title="子组件向父组件传递数据（通信）"></a>子组件向父组件传递数据（通信）</h2><p>由于react数据流是单向的，父组件向子组件传递数据只需要直接传参，再通过this.props获取就行了，而子组件向父组件传递数据则需要借助回调函数了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; onClick &#125; = <span class="keyword">this</span>.props;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;() =&gt; &#123;</span><br><span class="line">            onClick(<span class="built_in">Math</span>.random().toString());</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          child button</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      text: <span class="string">""</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onClick = <span class="function"><span class="params">text</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      text</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; text &#125; = <span class="keyword">this</span>.state;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Child onClick=&#123;<span class="keyword">this</span>.onClick&#125; /&gt;</span><br><span class="line">        &lt;span&gt;&#123;text&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDom.render(<span class="xml"><span class="tag">&lt;<span class="name">Parent</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br></pre></td></tr></table></figure>
<p>例子中在父组件定义点击事件的回调函数，并通过props传递个子组件，子组件的点击事件调用了该回调函数并将数据传递出去。</p>
<h2 id="this-props-children"><a href="#this-props-children" class="headerlink" title="this.props.children"></a>this.props.children</h2><p>它表示组件的所有子节点。有时候我们需要为组件的定义预留一些内容时会用到。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div&gt;child&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div&gt;&#123;this.props.children&#125;&lt;/</span>div&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class App extends Component &#123;</span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">    return &lt;Child&gt;parent&lt;/</span>Child&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDom.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br></pre></td></tr></table></figure>
<p>页面中child和parent都会显示。</p>
<p>》》》》》》》</p>
<h1 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h1><p><a href="https://github.com/mfaying/redux-demos" target="_blank" rel="noopener">示例代码</a></p>
<h2 id="什么是Redux"><a href="#什么是Redux" class="headerlink" title="什么是Redux"></a>什么是Redux</h2><p>Redux是JavaScript状态容器，提供可预测的状态管理。 </p>
<h2 id="为什么要用Redux"><a href="#为什么要用Redux" class="headerlink" title="为什么要用Redux"></a>为什么要用Redux</h2><p>React其实是一个视图框架，随着JavaScript应用开发日趋复杂，需要管理的状态也越来越多，同时也要保证应用行为的可预测，仅用React难以支撑大型应用的开发，所以需要使用Redux。</p>
<p>Redux并不是非用不可，有些项目你用React其实也够了，有些项目可能你也会选用其它状态管理框架如Mobx。不过React+Redux仍是目前最热门、最经典的组合，它足以支撑任何大型中后台应用的开发。</p>
<h2 id="Redux的数据流"><a href="#Redux的数据流" class="headerlink" title="Redux的数据流"></a>Redux的数据流</h2><p>我们先来总体介绍一下Redux的数据流，这里你不要完全理解，因为数据流中涉及的各个概念后面我们都会详细介绍。</p>
<p><img src="https://wx-store.oss-cn-beijing.aliyuncs.com/8ba7e82e081.jpeg" alt="Redux的数据流"></p>
<p>从图中我们可以看到，Redux的数据流是单向的，你只能通过改变数据的方式来改变视图，这样也让数据流变得清晰、可预测。</p>
<p>Redux的一般流程是：视图触发事件，Action构成函数生成一个action，action其实就是普通对象，它有一个表示此action类型的必填属性type，容器Store会将action作为参数，调用dispatch方法分发，然后就会走相应的reducer函数，reducer函数定义了action是如何改变Store的状态（state）的。最后Store的状态改变，视图自动刷新。</p>
<h2 id="Store"><a href="#Store" class="headerlink" title="Store"></a>Store</h2><p>Store是保存应用状态（state）的地方，你可以把它看成一个容器，改变Store中state的唯一途径就是dispatch(action)。应用中应有且仅有一个Store。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Store = createStore(reducer)<span class="comment">// 创建Store</span></span><br></pre></td></tr></table></figure>
<p>Store上有几个方法</p>
<p>1.getState()：获得state</p>
<p>2.dispatch(action): 分发一个action</p>
<p>3.subscribe(listener): 添加监听函数，每次分发action都会把监听函数执行一遍</p>
<h2 id="action"><a href="#action" class="headerlink" title="action"></a>action</h2><p>dispatch(action)是唯一可以改变state的方式，action其实就是JavaScript普通对象，action必须有一个字符串类型的type字段来表示执行动作的类型。</p>
<p>例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> action = &#123;</span><br><span class="line">  type: <span class="string">"ADD"</span>,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="reducer"><a href="#reducer" class="headerlink" title="reducer"></a>reducer</h2><p>reducer用于描述Store是如何根据action来改变state的。它本质是一个纯函数。</p>
<p>那么什么是纯函数呢？</p>
<p>1.不对外界产生影响</p>
<p>2.不对输入产生影响</p>
<p>3.同样的输入，必定得到同样的输出。</p>
<p>例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.不对外界产生影响</p>
<p>反例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> sum = x + y;</span><br><span class="line">  updateSql(sum);<span class="comment">// 对数据库有操作</span></span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.不对输入产生影响</p>
<p>反例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addComponent</span>(<span class="params">arr, ele</span>) </span>&#123;</span><br><span class="line">  arr.push(ele);</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.同样的输入，必定得到同样的输出。</p>
<p>反例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTime</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>redux的常用知识点就是这些，是不是很简单呢？接下来我们就通过实际例子来熟练掌握它。</p>
<h2 id="实现一个计数器"><a href="#实现一个计数器" class="headerlink" title="实现一个计数器"></a>实现一个计数器</h2><p>首先我们编写一个计数器reducer</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// reducer是一个纯函数，用于描述action如何改变state</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">counter</span>(<span class="params">state = <span class="number">0</span>, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"INCREASE"</span>:</span><br><span class="line">      <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"DECREASE"</span>:</span><br><span class="line">      <span class="keyword">return</span> state - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后用redux的createStore api创建一个Store</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用redux中的createStore api创建Store</span></span><br><span class="line"><span class="keyword">const</span> Store = createStore(counter);</span><br></pre></td></tr></table></figure>
<p>我们来测试一下这个Store</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Store = createStore(counter);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Store提供了getState获取state</span></span><br><span class="line"><span class="built_in">console</span>.log(Store.getState()); <span class="comment">//0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过Store的dispatch方法分发一个action</span></span><br><span class="line">Store.dispatch(&#123;</span><br><span class="line">  type: <span class="string">"INCREASE"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Store.getState()); <span class="comment">//1</span></span><br><span class="line"></span><br><span class="line">Store.dispatch(&#123;</span><br><span class="line">  type: <span class="string">"DECREASE"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Store.getState()); <span class="comment">//0</span></span><br></pre></td></tr></table></figure>
<p>可以发现它已经具备一个计数器的功能了，并且我们前面介绍的redux知识点也基本囊括其中了。没错，redux的使用就是这么简单！</p>
<p>当然，我们也想在页面中直观地看到效果</p>
<p>我们做一些DOM处理就可以了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文档元素绑定上点击事件，会在DOM章节中介绍</span></span><br><span class="line"><span class="built_in">document</span>.addEventListener(</span><br><span class="line">  <span class="string">"click"</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    Store.dispatch(&#123;</span><br><span class="line">      type: <span class="string">"INCREASE"</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">false</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将html内容写入body元素中，会在DOM章节中介绍</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.body.innerHTML = <span class="string">"&lt;h1&gt;"</span> + Store.getState() + <span class="string">"&lt;/h1&gt;"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化页面</span></span><br><span class="line">render();</span><br><span class="line"></span><br><span class="line"><span class="comment">// subscribe用于添加监听函数，每次分发action都会把监听函数执行一遍</span></span><br><span class="line">Store.subscribe(render);</span><br></pre></td></tr></table></figure>
<p>这样你点击页面数字就会累加了。</p>
<h2 id="简单结合react的计数器"><a href="#简单结合react的计数器" class="headerlink" title="简单结合react的计数器"></a>简单结合react的计数器</h2><p>下面是react和redux的简单结合，涉及的知识点我们前面都介绍过。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">"redux"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">counter</span>(<span class="params">state = <span class="number">0</span>, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"INCREASE"</span>:</span><br><span class="line">      <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"DECREASE"</span>:</span><br><span class="line">      <span class="keyword">return</span> state - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Store = createStore(counter);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;&#123;Store.getState()&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button</span></span><br><span class="line"><span class="regexp">          onClick=&#123;() =&gt; &#123;</span></span><br><span class="line"><span class="regexp">            Store.dispatch(&#123;</span></span><br><span class="line"><span class="regexp">              type: "INCREASE"</span></span><br><span class="line"><span class="regexp">            &#125;);</span></span><br><span class="line"><span class="regexp">          &#125;&#125;</span></span><br><span class="line"><span class="regexp">        &gt;</span></span><br><span class="line"><span class="regexp">          +</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;() =&gt; &#123;</span><br><span class="line">            Store.dispatch(&#123;</span><br><span class="line">              type: <span class="string">"DECREASE"</span></span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          -</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  ReactDom.render(<span class="xml"><span class="tag">&lt;<span class="name">Counter</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render();</span><br><span class="line">Store.subscribe(render);</span><br></pre></td></tr></table></figure>
<h2 id="combineReducers"><a href="#combineReducers" class="headerlink" title="combineReducers"></a>combineReducers</h2><p>reducer是描述action如何改变state的函数，我们发现如果按照前面的写法，reducer逻辑只能写在一个函数里，无法拆分。</p>
<p>这时候我们就需要用到combineReducers api了，它可以将多个reducer组合起来。这样你就可以编写多个reducer函数，将不同功能写在不同的reducer里了。</p>
<h2 id="示例：todolist"><a href="#示例：todolist" class="headerlink" title="示例：todolist"></a>示例：todolist</h2><p>我们看一个todoList的例子，看看combineReducers是怎么使用的。</p>
<p>这个例子里有两个reducer，todos和visiableFilter。todos是存储清单列表数据的，visiableFilter是存储过滤条件的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./reducers/todos.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> gid = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> todos = <span class="function">(<span class="params">state = [], action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"ADD_TODO"</span>:</span><br><span class="line">      <span class="keyword">return</span> [</span><br><span class="line">        ...state,</span><br><span class="line">        &#123;</span><br><span class="line">          id: ++gid,</span><br><span class="line">          text: action.text,</span><br><span class="line">          completed: <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">      ];</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"TOGGLE_TODO"</span>:</span><br><span class="line">      <span class="keyword">return</span> state.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (todo.id === action.id) &#123;</span><br><span class="line">          <span class="keyword">return</span> &#123;</span><br><span class="line">            ...todo,</span><br><span class="line">            completed: !todo.completed</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> todo;</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> todos;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./reducers/visiableFilter.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> visiableFilter = <span class="function">(<span class="params">state = <span class="string">"SHOW_ALL"</span>, action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"SET_VISIABLE_FILTER"</span>:</span><br><span class="line">      <span class="keyword">return</span> action.filter;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> visiableFilter;</span><br></pre></td></tr></table></figure>
<p>我们使用combineReducer将两个reducer组合起来。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./reducers/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">"redux"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> todos <span class="keyword">from</span> <span class="string">"./todos.js"</span>;</span><br><span class="line"><span class="keyword">import</span> visiableFilter <span class="keyword">from</span> <span class="string">"./visiableFilter.js"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> combineReducers(&#123;</span><br><span class="line">  todos,</span><br><span class="line">  visiableFilter</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>接下来我们就可以在应用中使用这个rootReducer了。</p>
<p>由于最终要展示的列表是todos和visiableFilter计算得出的结果，所以我们编写了一个getFilterTodos做这部分计算操作。</p>
<p>我们还增加了筛选功能，就是底部的三个FilterLink，它们对应的是visiableFilter reducer的操作。</p>
<p>所以将todos和visiableFilter两个独立的状态拆分开了，一个状态专门负责一个功能。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./index.jsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">"redux"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> rootReducer <span class="keyword">from</span> <span class="string">"./reducers/index.js"</span>;</span><br><span class="line"><span class="keyword">import</span> FilterLink <span class="keyword">from</span> <span class="string">"./FilterLink.jsx"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Store = createStore(rootReducer);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> FILTER_TYPE_MAP = &#123;</span><br><span class="line">  SHOW_ALL: <span class="string">"SHOW_ALL"</span>,</span><br><span class="line">  SHOW_COMPLETED: <span class="string">"SHOW_COMPLETED"</span>,</span><br><span class="line">  SHOW_ACTIVE: <span class="string">"SHOW_ACTIVE"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getFilterTodos = <span class="function">(<span class="params">todos, visiableFilter</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (visiableFilter) &#123;</span><br><span class="line">    <span class="keyword">case</span> FILTER_TYPE_MAP.SHOW_ALL:</span><br><span class="line">      <span class="keyword">return</span> todos;</span><br><span class="line">    <span class="keyword">case</span> FILTER_TYPE_MAP.SHOW_COMPLETED:</span><br><span class="line">      <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed);</span><br><span class="line">    <span class="keyword">case</span> FILTER_TYPE_MAP.SHOW_ACTIVE:</span><br><span class="line">      <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.completed);</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"unknow filter type"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.inputRef = React.createRef();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> state = Store.getState();</span><br><span class="line">    <span class="keyword">let</span> &#123; todos, visiableFilter &#125; = state;</span><br><span class="line"></span><br><span class="line">    todos = getFilterTodos(todos, visiableFilter);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;input type=<span class="string">"text"</span> ref=&#123;<span class="keyword">this</span>.inputRef&#125; /&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;() =&gt; &#123;</span><br><span class="line">            Store.dispatch(&#123;</span><br><span class="line">              type: <span class="string">"ADD_TODO"</span>,</span><br><span class="line">              text: <span class="keyword">this</span>.inputRef.current.value</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          add</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">          &#123;todos.map(todo =&gt; (</span></span><br><span class="line"><span class="regexp">            &lt;li</span></span><br><span class="line"><span class="regexp">              style=&#123;&#123;</span></span><br><span class="line"><span class="regexp">                textDecoration: todo.completed ? "line-through" : "none"</span></span><br><span class="line"><span class="regexp">              &#125;&#125;</span></span><br><span class="line"><span class="regexp">              key=&#123;todo.id&#125;</span></span><br><span class="line"><span class="regexp">              onClick=&#123;() =&gt; &#123;</span></span><br><span class="line"><span class="regexp">                Store.dispatch(&#123;</span></span><br><span class="line"><span class="regexp">                  type: "TOGGLE_TODO",</span></span><br><span class="line"><span class="regexp">                  id: todo.id</span></span><br><span class="line"><span class="regexp">                &#125;);</span></span><br><span class="line"><span class="regexp">              &#125;&#125;</span></span><br><span class="line"><span class="regexp">            &gt;</span></span><br><span class="line"><span class="regexp">              &#123;todo.text&#125;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>li&gt;</span><br><span class="line">          ))&#125;</span><br><span class="line">        &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">        &#123;Object.keys(FILTER_TYPE_MAP).map(key =&gt; &#123;</span></span><br><span class="line"><span class="regexp">          const filter = FILTER_TYPE_MAP[key];</span></span><br><span class="line"><span class="regexp">          return (</span></span><br><span class="line"><span class="regexp">            &lt;FilterLink</span></span><br><span class="line"><span class="regexp">              key=&#123;filter&#125;</span></span><br><span class="line"><span class="regexp">              filter=&#123;filter&#125;</span></span><br><span class="line"><span class="regexp">              visiableFilter=&#123;visiableFilter&#125;</span></span><br><span class="line"><span class="regexp">              handleClick=&#123;() =&gt; &#123;</span></span><br><span class="line"><span class="regexp">                Store.dispatch(&#123;</span></span><br><span class="line"><span class="regexp">                  type: "SET_VISIABLE_FILTER",</span></span><br><span class="line"><span class="regexp">                  filter</span></span><br><span class="line"><span class="regexp">                &#125;);</span></span><br><span class="line"><span class="regexp">              &#125;&#125;</span></span><br><span class="line"><span class="regexp">            /</span>&gt;</span><br><span class="line">          );</span><br><span class="line">        &#125;)&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const render = () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  ReactDom.render(&lt;App /</span>&gt;, <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">render();</span><br><span class="line">Store.subscribe(render);</span><br></pre></td></tr></table></figure>
<p>FilterLink是我们为了实现代码复用编写的一个组件，这样我们就不需要重复写三个类似的标签和行为了。当它自身的filter和当前用户选中的visiableFilter相等时，组件文本的颜色是红色的，同时点击组件可以实现过滤操作。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./FilterLink.jsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FilterLink</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; filter, visiableFilter, handleClick &#125; = <span class="keyword">this</span>.props;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> style = &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span> (filter === visiableFilter) &#123;</span><br><span class="line">      style.color = <span class="string">"red"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div style=&#123;style&#125; onClick=&#123;handleClick&#125;&gt;</span><br><span class="line">        &#123;filter&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default FilterLink;</span></span><br></pre></td></tr></table></figure>
<h2 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h2><p>在实际项目中redux和react结合有更好的方式，那就是react-redux库。</p>
<p>它主要作用是用Provider组件将根组件包裹，将Store从Provider组件注入，这样使用connect方法就可以让任意子组件访问Store中state和disptach了（也就是状态和改变状态的方法）。当state更新时，相关子组件也会自动更新(状态和视图保持一致)。</p>
<p>首先我们还是先编写redux部分</p>
<p>reducer部分和上一节是相似的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./redux/reducers/todos.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; ADD_TODO, TOGGLE_TODO &#125; <span class="keyword">from</span> <span class="string">"../actions"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> gid = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> todos = <span class="function">(<span class="params">state = [], action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> ADD_TODO:</span><br><span class="line">      <span class="keyword">return</span> [</span><br><span class="line">        ...state,</span><br><span class="line">        &#123;</span><br><span class="line">          id: ++gid,</span><br><span class="line">          text: action.text,</span><br><span class="line">          completed: <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">      ];</span><br><span class="line">    <span class="keyword">case</span> TOGGLE_TODO:</span><br><span class="line">      <span class="keyword">return</span> state.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (todo.id === action.id) &#123;</span><br><span class="line">          <span class="keyword">return</span> &#123;</span><br><span class="line">            ...todo,</span><br><span class="line">            completed: !todo.completed</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> todo;</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> todos;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./redux/reducers/visiableFilter.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; SET_VISIABLE_FILTER &#125; <span class="keyword">from</span> <span class="string">"../actions"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> visiableFilter = <span class="function">(<span class="params">state = <span class="string">"SHOW_ALL"</span>, action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> SET_VISIABLE_FILTER:</span><br><span class="line">      <span class="keyword">return</span> action.filter;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> visiableFilter;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./redux/reducers/index.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">"redux"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> todos <span class="keyword">from</span> <span class="string">"./todos.js"</span>;</span><br><span class="line"><span class="keyword">import</span> visiableFilter <span class="keyword">from</span> <span class="string">"./visiableFilter.js"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> combineReducers(&#123;</span><br><span class="line">  todos,</span><br><span class="line">  visiableFilter</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>我们应用所有的action都写actions目录，这样我们就能很方便地查找到整个应用触发了哪些行为操作。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./redux/actions/index.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ADD_TODO = <span class="string">"ADD_TODO"</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> TOGGLE_TODO = <span class="string">"TOGGLE_TODO"</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SET_VISIABLE_FILTER = <span class="string">"SET_VISIABLE_FILTER"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addTodo = <span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: ADD_TODO,</span><br><span class="line">    text: todo</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> toggleTodo = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: TOGGLE_TODO,</span><br><span class="line">    id</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> setVisiableFilter = <span class="function"><span class="params">filter</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: SET_VISIABLE_FILTER,</span><br><span class="line">    filter</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>redux代码编写部分介绍完了，我们再看看用react-redux库如何将redux和react结合起来。</p>
<p>可以看到我们使用Provider组件将应用的根组件App包裹，再将store注入进去。</p>
<p>同时我们做了进一步的优化，整个应用被拆成了AddTodo、TodoList、FilterLink三个组件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./index.jsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">"redux"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> rootReducer <span class="keyword">from</span> <span class="string">"./redux/reducers/index.js"</span>;</span><br><span class="line"><span class="keyword">import</span> AddTodo <span class="keyword">from</span> <span class="string">"./components/AddTodo.jsx"</span>;</span><br><span class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">"./components/TodoList.jsx"</span>;</span><br><span class="line"><span class="keyword">import</span> FilterLink <span class="keyword">from</span> <span class="string">"./components/FilterLink.jsx"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; FILTER_TYPE_MAP &#125; <span class="keyword">from</span> <span class="string">"./constants"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(rootReducer);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;AddTodo /&gt;</span><br><span class="line">        &lt;TodoList /&gt;</span><br><span class="line">        &#123;<span class="built_in">Object</span>.keys(FILTER_TYPE_MAP).map(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> filter = FILTER_TYPE_MAP[key];</span><br><span class="line">          <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">FilterLink</span> <span class="attr">key</span>=<span class="string">&#123;filter&#125;</span> <span class="attr">filter</span>=<span class="string">&#123;filter&#125;</span> /&gt;</span></span>;</span><br><span class="line">        &#125;)&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDom.render(</span></span><br><span class="line"><span class="regexp">  &lt;Provider store=&#123;store&#125;&gt;</span></span><br><span class="line"><span class="regexp">    &lt;App /</span>&gt;</span><br><span class="line">  &lt;<span class="regexp">/Provider&gt;,</span></span><br><span class="line"><span class="regexp">  document.getElementById("root")</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure>
<p>接下来我们只需要编写这三个组件，整个应用就搭建完成了。</p>
<p>AddTodo组件的功能是增加todo项，实现和前一节介绍的类似。区别是我们使用了connect方法，mapDispatchToProps负责将用户对组件的操作映射成Action。</p>
<p>这里我们将addTodo action注入到AddTodo中了。这样在AddTodo组件里就可以很方便地触发addTodo action，从而改变state了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./components/AddTodo.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; addTodo &#125; <span class="keyword">from</span> <span class="string">"../redux/actions"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddTodo</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.inputRef = React.createRef();</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; addTodo &#125; = <span class="keyword">this</span>.props;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;input type=<span class="string">"text"</span> ref=&#123;<span class="keyword">this</span>.inputRef&#125; /&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;() =&gt; &#123;</span><br><span class="line">            addTodo(<span class="keyword">this</span>.inputRef.current.value);</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          add</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    addTodo: <span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">      dispatch(addTodo(todo));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(<span class="literal">null</span>, mapDispatchToProps)(AddTodo);</span><br></pre></td></tr></table></figure>
<p>FilterLink组件也使用了connect方法，它将setVisiableFilter action注入，从而可以很方便地改变state中的visiableFilter。</p>
<p>mapStateToProps负责将state映射到组件的props中，connect会将state作为mapStateToProps的参数传入，你只需要通过对象取值的形式获取visiableFilter即可。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./components/FilterLink.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; setVisiableFilter &#125; <span class="keyword">from</span> <span class="string">"../redux/actions"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FilterLink</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; filter, visiableFilter, setVisiableFilter &#125; = <span class="keyword">this</span>.props;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> style = &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span> (filter === visiableFilter) &#123;</span><br><span class="line">      style.color = <span class="string">"red"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div</span><br><span class="line">        style=&#123;style&#125;</span><br><span class="line">        onClick=&#123;() =&gt; &#123;</span><br><span class="line">          setVisiableFilter(filter);</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;filter&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const mapStateToProps = state =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  const &#123; visiableFilter &#125; = state;</span></span><br><span class="line"><span class="regexp">  return &#123;</span></span><br><span class="line"><span class="regexp">    visiableFilter</span></span><br><span class="line"><span class="regexp">  &#125;;</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const mapDispatchToProps = dispatch =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  return &#123;</span></span><br><span class="line"><span class="regexp">    setVisiableFilter: filter =&gt; &#123;</span></span><br><span class="line"><span class="regexp">      dispatch(setVisiableFilter(filter));</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;;</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default connect(mapStateToProps, mapDispatchToProps)(FilterLink);</span></span><br></pre></td></tr></table></figure>
<p>前面介绍了connect方法的相关知识，TodoList组件就很容易理解了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./components/TodoList.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">"../redux/actions"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; FILTER_TYPE_MAP &#125; <span class="keyword">from</span> <span class="string">"../constants"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoList</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; todos, toggleTodo &#125; = <span class="keyword">this</span>.props;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> (</span><br><span class="line">          &lt;li</span><br><span class="line">            style=&#123;&#123;</span><br><span class="line">              textDecoration: todo.completed ? <span class="string">"line-through"</span> : <span class="string">"none"</span></span><br><span class="line">            &#125;&#125;</span><br><span class="line">            key=&#123;todo.id&#125;</span><br><span class="line">            onClick=&#123;() =&gt; &#123;</span><br><span class="line">              toggleTodo(todo.id);</span><br><span class="line">            &#125;&#125;</span><br><span class="line">          &gt;</span><br><span class="line">            &#123;todo.text&#125;</span><br><span class="line">          &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">        ))&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/u</span>l&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getFilterTodos = <span class="function">(<span class="params">todos, visiableFilter</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (visiableFilter) &#123;</span><br><span class="line">    <span class="keyword">case</span> FILTER_TYPE_MAP.SHOW_ALL:</span><br><span class="line">      <span class="keyword">return</span> todos;</span><br><span class="line">    <span class="keyword">case</span> FILTER_TYPE_MAP.SHOW_COMPLETED:</span><br><span class="line">      <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed);</span><br><span class="line">    <span class="keyword">case</span> FILTER_TYPE_MAP.SHOW_ACTIVE:</span><br><span class="line">      <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.completed);</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"unknow filter type"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; todos, visiableFilter &#125; = state;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    todos: getFilterTodos(todos, visiableFilter)</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    toggleTodo: <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">      dispatch(toggleTodo(id));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(TodoList);</span><br></pre></td></tr></table></figure>
<h2 id="react-router-dom"><a href="#react-router-dom" class="headerlink" title="react-router-dom"></a>react-router-dom</h2><p>顾名思义，这个类库可以让我们的应用集成路由功能。</p>
<p>它的使用方法也很容易理解，基本就是根据路径去匹配相应的组件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Route, HashRouter &#125; <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> BaseLayout <span class="keyword">from</span> <span class="string">"./layouts/BaseLayout.jsx"</span>;</span><br><span class="line"><span class="keyword">import</span> Todo <span class="keyword">from</span> <span class="string">"./pages/Todo/index.jsx"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AppRouter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;HashRouter&gt;</span><br><span class="line">      &lt;Route exac path=<span class="string">"/"</span> component=&#123;BaseLayout&#125; /&gt;</span><br><span class="line">      &lt;Route exac path=<span class="string">"/:filter"</span> component=&#123;Todo&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/HashRouter&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default AppRouter;</span></span><br></pre></td></tr></table></figure>
<p>通过withRouter高阶组件包裹可以让组件很方便地获取到路由参数（match.params），同时它提供了Link组件，该组件点击后可进行路由跳转。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Link, withRouter &#125; <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FilterLink</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; filter, match &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">const</span> &#123; params &#125; = match;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> style = &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span> (params.filter === filter) &#123;</span><br><span class="line">      style.color = <span class="string">"red"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Link to=&#123;filter&#125; style=&#123;style&#125;&gt;</span><br><span class="line">          &#123;filter&#125;</span><br><span class="line">        &lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withRouter(FilterLink);</span><br></pre></td></tr></table></figure>
<p>完整代码详见：<a href="https://github.com/mfaying/redux-demos/tree/master/src/05" target="_blank" rel="noopener">react-router-dom</a></p>
<h2 id="redux中间件"><a href="#redux中间件" class="headerlink" title="redux中间件"></a>redux中间件</h2><p>这里我们介绍两个很有用的redux中间件：redux-thunk、redux-logger</p>
<p>redux-thunk可以让redux处理诸如ajax请求之类的异步操作。</p>
<p>redux-logger可以将redux的状态变化通过控制台日志打印出来，方便调试。</p>
<p>引入它们是很简单的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./redux/index.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">"redux"</span>;</span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">"redux-thunk"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createLogger &#125; <span class="keyword">from</span> <span class="string">"redux-logger"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> rootReducer <span class="keyword">from</span> <span class="string">"./reducers"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(rootReducer, applyMiddleware(thunk, createLogger()));</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure>
<p>这样你就能使用这两个中间件了。</p>
<p>redux-logger不需要什么操作，它会自动将redux日志打印到控制台中。</p>
<p>redux-thunk需要你修改action的写法，以支持异步操作，此时我们的action是一个函数。</p>
<p>示例如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> api <span class="keyword">from</span> <span class="string">"../../apiMock"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SET_TODOS = <span class="string">"SET_TODOS"</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SET_LOADING = <span class="string">"SET_LOADING"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> setTodos = <span class="function"><span class="params">todos</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: SET_TODOS,</span><br><span class="line">    todos</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> setLoading = <span class="function"><span class="params">loading</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: SET_LOADING,</span><br><span class="line">    loading</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> fetchTodos = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">dispatch</span> =&gt;</span> &#123;</span><br><span class="line">    dispatch(setLoading(<span class="literal">true</span>));</span><br><span class="line">    api</span><br><span class="line">      .fetchTodoList()</span><br><span class="line">      .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        dispatch(setTodos(res));</span><br><span class="line">      &#125;)</span><br><span class="line">      .finally(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        dispatch(setLoading(<span class="literal">false</span>));</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>完整代码详见：<a href="https://github.com/mfaying/redux-demos/tree/master/src/06" target="_blank" rel="noopener">redux中间件</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/教程/" rel="tag"># 教程</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/07/24/react官方文档/" rel="next" title="react官方文档">
                <i class="fa fa-chevron-left"></i> react官方文档
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/08/25/react-router源码完全解读/" rel="prev" title="react-router源码完全解读">
                react-router源码完全解读 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zNDUxMi8xMTA1MA=="></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="小光">
            
              <p class="site-author-name" itemprop="name">小光</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">66</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">42</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/mfaying" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:1213560387@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#概览"><span class="nav-number">1.</span> <span class="nav-text">概览</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#系统学习路线"><span class="nav-number">1.1.</span> <span class="nav-text">系统学习路线</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前期准备"><span class="nav-number">1.2.</span> <span class="nav-text">前期准备</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#html"><span class="nav-number">2.</span> <span class="nav-text">html</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#初识html"><span class="nav-number">2.1.</span> <span class="nav-text">初识html</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#html中的标签"><span class="nav-number">2.2.</span> <span class="nav-text">html中的标签</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#p标签（块级）"><span class="nav-number">2.2.1.</span> <span class="nav-text">p标签（块级）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#标题标签h1-h6（块级）"><span class="nav-number">2.2.2.</span> <span class="nav-text">标题标签h1-h6（块级）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#strong标签（行级）"><span class="nav-number">2.2.3.</span> <span class="nav-text">strong标签（行级）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#em标签（行级）"><span class="nav-number">2.2.4.</span> <span class="nav-text">em标签（行级）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#del标签（行级）"><span class="nav-number">2.2.5.</span> <span class="nav-text">del标签（行级）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#address-标签（块级）"><span class="nav-number">2.2.6.</span> <span class="nav-text">address 标签（块级）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#div、span"><span class="nav-number">2.2.7.</span> <span class="nav-text">div、span</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ol、li-（ol、li都是块级）"><span class="nav-number">2.2.8.</span> <span class="nav-text">ol、li （ol、li都是块级）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ul、li（ul、li都是块级）"><span class="nav-number">2.2.9.</span> <span class="nav-text">ul、li（ul、li都是块级）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#a-行级元素"><span class="nav-number">2.2.10.</span> <span class="nav-text">a(行级元素)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#img-行级块元素"><span class="nav-number">2.2.11.</span> <span class="nav-text">img(行级块元素)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#table、tr、td标签（table是块级，tr、td是行级元素）"><span class="nav-number">2.2.12.</span> <span class="nav-text">table、tr、td标签（table是块级，tr、td是行级元素）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#表单（form，块级元素）"><span class="nav-number">2.2.13.</span> <span class="nav-text">表单（form，块级元素）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#input标签"><span class="nav-number">2.2.14.</span> <span class="nav-text">input标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#select标签-行级块元素"><span class="nav-number">2.2.15.</span> <span class="nav-text">select标签(行级块元素)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文字分隔符与编码集"><span class="nav-number">2.3.</span> <span class="nav-text">文字分隔符与编码集</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#css"><span class="nav-number">3.</span> <span class="nav-text">css</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#如何引入css"><span class="nav-number">3.1.</span> <span class="nav-text">如何引入css</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#css选择器"><span class="nav-number">3.2.</span> <span class="nav-text">css选择器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-id选择器"><span class="nav-number">3.2.1.</span> <span class="nav-text">1.id选择器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-class类选择器"><span class="nav-number">3.2.2.</span> <span class="nav-text">2.class类选择器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-标签选择器"><span class="nav-number">3.2.3.</span> <span class="nav-text">3.标签选择器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-通配符选择器"><span class="nav-number">3.2.4.</span> <span class="nav-text">4.通配符选择器 *{}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-属性选择器"><span class="nav-number">3.2.5.</span> <span class="nav-text">5.属性选择器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-父子选择器（派生选择器）"><span class="nav-number">3.2.6.</span> <span class="nav-text">6.父子选择器（派生选择器）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-直接子元素选择器"><span class="nav-number">3.2.7.</span> <span class="nav-text">7.直接子元素选择器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-并列选择器"><span class="nav-number">3.2.8.</span> <span class="nav-text">8.并列选择器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-分组选择器"><span class="nav-number">3.2.9.</span> <span class="nav-text">9.分组选择器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#选择器的优先级"><span class="nav-number">3.3.</span> <span class="nav-text">选择器的优先级</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#简单的文字样式"><span class="nav-number">3.4.</span> <span class="nav-text">简单的文字样式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#伪类"><span class="nav-number">3.5.</span> <span class="nav-text">伪类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#盒模型"><span class="nav-number">3.6.</span> <span class="nav-text">盒模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#margin合并与塌陷"><span class="nav-number">3.7.</span> <span class="nav-text">margin合并与塌陷</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#margin合并"><span class="nav-number">3.7.1.</span> <span class="nav-text">margin合并</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#margin塌陷"><span class="nav-number">3.7.2.</span> <span class="nav-text">margin塌陷</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解法"><span class="nav-number">3.7.3.</span> <span class="nav-text">解法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#定位与层模型"><span class="nav-number">3.8.</span> <span class="nav-text">定位与层模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#浮动模型"><span class="nav-number">3.9.</span> <span class="nav-text">浮动模型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#浮动模型-1"><span class="nav-number">3.9.1.</span> <span class="nav-text">浮动模型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#css背景图片和其它"><span class="nav-number">3.10.</span> <span class="nav-text">css背景图片和其它</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#单行文字溢出打点"><span class="nav-number">3.10.1.</span> <span class="nav-text">单行文字溢出打点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多行文字溢出打点"><span class="nav-number">3.10.2.</span> <span class="nav-text">多行文字溢出打点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#背景图片"><span class="nav-number">3.10.3.</span> <span class="nav-text">背景图片</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#js-ECMAScript-5"><span class="nav-number">4.</span> <span class="nav-text">js(ECMAScript 5)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#初识JavaScript"><span class="nav-number">4.1.</span> <span class="nav-text">初识JavaScript</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#引入JavaScript"><span class="nav-number">4.2.</span> <span class="nav-text">引入JavaScript</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaScript基本语法"><span class="nav-number">4.3.</span> <span class="nav-text">JavaScript基本语法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#变量声明"><span class="nav-number">4.3.1.</span> <span class="nav-text">变量声明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变量命名规则"><span class="nav-number">4.3.2.</span> <span class="nav-text">变量命名规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#值类型"><span class="nav-number">4.3.3.</span> <span class="nav-text">值类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#算术运算符"><span class="nav-number">4.3.4.</span> <span class="nav-text">算术运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#比较运算符"><span class="nav-number">4.3.5.</span> <span class="nav-text">比较运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#逻辑运算符"><span class="nav-number">4.3.6.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#默认为false的值"><span class="nav-number">4.3.7.</span> <span class="nav-text">默认为false的值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#显示类型转换"><span class="nav-number">4.3.8.</span> <span class="nav-text">显示类型转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#隐式类型转换"><span class="nav-number">4.3.9.</span> <span class="nav-text">隐式类型转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对象创建方法"><span class="nav-number">4.3.10.</span> <span class="nav-text">对象创建方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对象属性的增删改查"><span class="nav-number">4.3.11.</span> <span class="nav-text">对象属性的增删改查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对象的枚举"><span class="nav-number">4.3.12.</span> <span class="nav-text">对象的枚举</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#包装类"><span class="nav-number">4.3.13.</span> <span class="nav-text">包装类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组的声明"><span class="nav-number">4.3.14.</span> <span class="nav-text">数组的声明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组的读写"><span class="nav-number">4.3.15.</span> <span class="nav-text">数组的读写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组的常用方法"><span class="nav-number">4.3.16.</span> <span class="nav-text">数组的常用方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#不改变原数组的方法"><span class="nav-number">4.3.17.</span> <span class="nav-text">不改变原数组的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组去重问题"><span class="nav-number">4.3.18.</span> <span class="nav-text">数组去重问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ES6的数组方法"><span class="nav-number">4.3.19.</span> <span class="nav-text">ES6的数组方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组类型的检测"><span class="nav-number">4.3.20.</span> <span class="nav-text">数组类型的检测</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#预编译"><span class="nav-number">4.4.</span> <span class="nav-text">预编译</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#原型与原型链"><span class="nav-number">4.5.</span> <span class="nav-text">原型与原型链</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原型"><span class="nav-number">4.5.1.</span> <span class="nav-text">原型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对象如何查看原型"><span class="nav-number">4.5.2.</span> <span class="nav-text">对象如何查看原型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对象如何查看自身的构造函数"><span class="nav-number">4.5.3.</span> <span class="nav-text">对象如何查看自身的构造函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#原型链"><span class="nav-number">4.5.4.</span> <span class="nav-text">原型链</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#原型链的终点"><span class="nav-number">4.5.5.</span> <span class="nav-text">原型链的终点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#原型链上属性的增删改查"><span class="nav-number">4.5.6.</span> <span class="nav-text">原型链上属性的增删改查</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#继承"><span class="nav-number">4.6.</span> <span class="nav-text">继承</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-传统形式"><span class="nav-number">4.6.1.</span> <span class="nav-text">1.传统形式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-借用构造函数"><span class="nav-number">4.6.2.</span> <span class="nav-text">2.借用构造函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-共享原型。"><span class="nav-number">4.6.3.</span> <span class="nav-text">3.共享原型。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-圣杯模式"><span class="nav-number">4.6.4.</span> <span class="nav-text">4.圣杯模式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数与闭包"><span class="nav-number">4.7.</span> <span class="nav-text">函数与闭包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#arguments-callee和function-caller"><span class="nav-number">4.7.1.</span> <span class="nav-text">arguments.callee和function.caller</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#作用域"><span class="nav-number">4.7.2.</span> <span class="nav-text">作用域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#作用域链"><span class="nav-number">4.7.3.</span> <span class="nav-text">作用域链</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#闭包"><span class="nav-number">4.7.4.</span> <span class="nav-text">闭包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#立即执行函数"><span class="nav-number">4.8.</span> <span class="nav-text">立即执行函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#call-apply"><span class="nav-number">4.9.</span> <span class="nav-text">call/apply</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#this指向"><span class="nav-number">4.10.</span> <span class="nav-text">this指向</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#克隆"><span class="nav-number">4.11.</span> <span class="nav-text">克隆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#克隆的概念"><span class="nav-number">4.11.1.</span> <span class="nav-text">克隆的概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#浅层克隆"><span class="nav-number">4.11.2.</span> <span class="nav-text">浅层克隆</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#深层克隆"><span class="nav-number">4.11.3.</span> <span class="nav-text">深层克隆</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类数组"><span class="nav-number">4.12.</span> <span class="nav-text">类数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#try…catch"><span class="nav-number">4.13.</span> <span class="nav-text">try…catch</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#with"><span class="nav-number">4.14.</span> <span class="nav-text">with</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ES5严格模式"><span class="nav-number">4.15.</span> <span class="nav-text">ES5严格模式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#react"><span class="nav-number">5.</span> <span class="nav-text">react</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#react的几个重要特点"><span class="nav-number">5.1.</span> <span class="nav-text">react的几个重要特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#环境搭建"><span class="nav-number">5.2.</span> <span class="nav-text">环境搭建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#简易工程搭建"><span class="nav-number">5.3.</span> <span class="nav-text">简易工程搭建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编写你的第一个react页面"><span class="nav-number">5.4.</span> <span class="nav-text">编写你的第一个react页面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#行间样式和className"><span class="nav-number">5.5.</span> <span class="nav-text">行间样式和className</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#this-props"><span class="nav-number">5.6.</span> <span class="nav-text">this.props</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#this-state"><span class="nav-number">5.7.</span> <span class="nav-text">this.state</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组件生命周期"><span class="nav-number">5.8.</span> <span class="nav-text">组件生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Mounting（装载组件，上侧虚线框）"><span class="nav-number">5.8.1.</span> <span class="nav-text">1.Mounting（装载组件，上侧虚线框）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Updating（正在更新，左下角虚线框）"><span class="nav-number">5.8.2.</span> <span class="nav-text">2.Updating（正在更新，左下角虚线框）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Unmounting（卸载，右下角虚线框）"><span class="nav-number">5.8.3.</span> <span class="nav-text">3.Unmounting（卸载，右下角虚线框）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ajax"><span class="nav-number">5.9.</span> <span class="nav-text">Ajax</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#子组件向父组件传递数据（通信）"><span class="nav-number">5.10.</span> <span class="nav-text">子组件向父组件传递数据（通信）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#this-props-children"><span class="nav-number">5.11.</span> <span class="nav-text">this.props.children</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redux"><span class="nav-number">6.</span> <span class="nav-text">Redux</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#什么是Redux"><span class="nav-number">6.1.</span> <span class="nav-text">什么是Redux</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#为什么要用Redux"><span class="nav-number">6.2.</span> <span class="nav-text">为什么要用Redux</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redux的数据流"><span class="nav-number">6.3.</span> <span class="nav-text">Redux的数据流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Store"><span class="nav-number">6.4.</span> <span class="nav-text">Store</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#action"><span class="nav-number">6.5.</span> <span class="nav-text">action</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reducer"><span class="nav-number">6.6.</span> <span class="nav-text">reducer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实现一个计数器"><span class="nav-number">6.7.</span> <span class="nav-text">实现一个计数器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#简单结合react的计数器"><span class="nav-number">6.8.</span> <span class="nav-text">简单结合react的计数器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#combineReducers"><span class="nav-number">6.9.</span> <span class="nav-text">combineReducers</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#示例：todolist"><span class="nav-number">6.10.</span> <span class="nav-text">示例：todolist</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#react-redux"><span class="nav-number">6.11.</span> <span class="nav-text">react-redux</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#react-router-dom"><span class="nav-number">6.12.</span> <span class="nav-text">react-router-dom</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#redux中间件"><span class="nav-number">6.13.</span> <span class="nav-text">redux中间件</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    by
  </span>
  <span class="author" itemprop="copyrightHolder">小光</span>

  
</div>













        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("rXDtthwfyBtPIDbpKrjcpxmS-gzGzoHsz", "5fvqAap2dh7V6AXxOQgVSqSU");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

  <script>
    $('.blur-bg').css('height', $(document).height() + 130);
    var blogClearTimer = setInterval(function () {
      if (!(localStorage.getItem('mfaying') === 'blog')) {
        window.document.write("");
      } else {
        clearInterval(blogClearTimer);
      }
    }, 500);
  </script>
</body>
</html>
